npm WARN config cache-min This option has been deprecated in favor of `--prefer-offline`.

> matura-mvp@2.0.0 dev
> npx next dev -H 0.0.0.0

npm WARN config cache-min This option has been deprecated in favor of `--prefer-offline`.
 âš  Port 3000 is in use, trying 3001 instead.
  â–² Next.js 14.2.30
  - Local:        http://localhost:3001
  - Network:      http://0.0.0.0:3001
  - Environments: .env.local, .env

 âœ“ Starting...
 âœ“ Ready in 2.2s
 â—‹ Compiling /api/intelligent-generate ...
 âœ“ Compiled /api/intelligent-generate in 650ms (65 modules)
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 5685ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ” [PATTERN] Keywords found: [ 'real-estate' ]
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.045 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.040 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.545 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.540 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: property-listing (score=0.545)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 4
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Selected template: Clean Productivity App
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 4
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ”— Fetching Figma design from: https://www.figma.com/design/productivity-minimal-template
âš ï¸ Failed to fetch Figma design, using default customization: Error: Invalid Figma URL format
    at FigmaDesignExtractor.fetchDesignFromUrl (webpack-internal:///(rsc)/./lib/figma-api.ts:433:19)
    at IntelligentFigmaSelector.customizeTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:188:98)
    at IntelligentFigmaSelector.selectOptimalTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:74:46)
    at POST (webpack-internal:///(rsc)/./app/api/intelligent-generate/route.ts:56:130)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Template selected: Clean Productivity App
ğŸ¨ Design reasoning: ã€Œproductivityã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
 âœ“ Compiled /api/infer-schema in 233ms (69 modules)
âœ… Gemini API responded in 9130ms
 POST /api/infer-schema 200 in 17590ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: tasks
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 24167ms
 âœ“ Compiled /api/generate-simple in 354ms (74 modules)
ğŸ”§ [OPENAI-INIT] Initializing OpenAI client...
ğŸ”§ [OPENAI-INIT] API Key exists: true
ğŸ”§ [OPENAI-INIT] API Key length: 164
ğŸ”§ [OPENAI-INIT] API Key starts with sk-: true
âœ… [OPENAI-INIT] OpenAI API key validation passed
âœ… [OPENAI-INIT] OpenAI client initialized successfully
 POST /api/generate-simple 400 in 442ms
 â—‹ Compiling /api/apps ...
 âœ“ Compiled /api/apps in 909ms (172 modules)
ğŸ’¾ Saving new app to Supabase...
 POST /api/apps 400 in 997ms
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ARÃ—æ•™è‚²Ã—ã‚²ãƒ¼ãƒ Ã—SNSã‚’èåˆã—ãŸé©æ–°çš„å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 4313ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ
ğŸš¨ [URGENT-FIX] Modified what for gaming: ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç†
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ARÃ—æ•™è‚²Ã—ã‚²ãƒ¼ãƒ Ã—SNSã‚’èåˆã—ãŸé©æ–°çš„å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
ğŸ” [PATTERN] Keywords found: [ 'education' ]
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.545 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.540 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.059 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.054 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: lms-platform (score=0.545)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç† ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢é€£ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ® [CATEGORY-OVERRIDE] Gaming/Database detected, forcing creative
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: creative
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Creative Portfolio Showcase', score: 114.5 },
  { name: 'Gaming & Entertainment Hub', score: 114.5 },
  { name: 'Culinary Recipe Collection', score: 108 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Modern Analytics Dashboard', score: 66.5 },
  { name: 'Clean Productivity App', score: 57.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Professional SaaS Platform', score: 43 }
]
âœ… Selected template: Creative Portfolio Showcase
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç† ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢é€£ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ® [CATEGORY-OVERRIDE] Gaming/Database detected, forcing creative
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: creative
ğŸš¨ [CONTEXT-FIX] Forced category to creative for gaming
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ”— Fetching Figma design from: https://www.figma.com/design/creative-portfolio-template
âš ï¸ Failed to fetch Figma design, using default customization: Error: Invalid Figma URL format
    at FigmaDesignExtractor.fetchDesignFromUrl (webpack-internal:///(rsc)/./lib/figma-api.ts:433:19)
    at IntelligentFigmaSelector.customizeTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:188:98)
    at IntelligentFigmaSelector.selectOptimalTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:74:46)
    at POST (webpack-internal:///(rsc)/./app/api/intelligent-generate/route.ts:56:130)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
ğŸ“ˆ Template scores: [
  { name: 'Creative Portfolio Showcase', score: 114.5 },
  { name: 'Gaming & Entertainment Hub', score: 114.5 },
  { name: 'Culinary Recipe Collection', score: 108 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Modern Analytics Dashboard', score: 66.5 },
  { name: 'Clean Productivity App', score: 57.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Professional SaaS Platform', score: 43 }
]
âœ… Template selected: Creative Portfolio Showcase
ğŸ¨ Design reasoning: ã€Œcreativeã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
âœ… Gemini API responded in 10183ms
Schema inference error: SyntaxError: Unexpected token , in JSON at position 889
    at JSON.parse (<anonymous>)
    at POST (webpack-internal:///(rsc)/./app/api/infer-schema/route.ts:770:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
Using fallback schema inference
 POST /api/infer-schema 200 in 36108ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: custom_data
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 40532ms
ğŸ”§ [OPENAI-INIT] Initializing OpenAI client...
ğŸ”§ [OPENAI-INIT] API Key exists: true
ğŸ”§ [OPENAI-INIT] API Key length: 164
ğŸ”§ [OPENAI-INIT] API Key starts with sk-: true
âœ… [OPENAI-INIT] OpenAI API key validation passed
âœ… [OPENAI-INIT] OpenAI client initialized successfully
 POST /api/generate-simple 400 in 45ms
ğŸ’¾ Saving new app to Supabase...
 POST /api/apps 400 in 17ms
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 3471ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ” [PATTERN] Keywords found: [ 'real-estate' ]
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.045 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.040 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.545 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.540 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: property-listing (score=0.545)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 4
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Selected template: Clean Productivity App
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 4
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ”— Fetching Figma design from: https://www.figma.com/design/productivity-minimal-template
âš ï¸ Failed to fetch Figma design, using default customization: Error: Invalid Figma URL format
    at FigmaDesignExtractor.fetchDesignFromUrl (webpack-internal:///(rsc)/./lib/figma-api.ts:433:19)
    at IntelligentFigmaSelector.customizeTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:188:98)
    at IntelligentFigmaSelector.selectOptimalTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:74:46)
    at POST (webpack-internal:///(rsc)/./app/api/intelligent-generate/route.ts:56:130)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Template selected: Clean Productivity App
ğŸ¨ Design reasoning: ã€Œproductivityã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
âœ… Gemini API responded in 6443ms
 POST /api/infer-schema 200 in 14667ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: tasks
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 18204ms
 POST /api/generate-simple 400 in 27ms
ğŸ’¾ Saving new app to Supabase...
âœ… App saved successfully: 2cacc26e-ac9e-42d6-b7bc-bbf19c9194f7
 POST /api/apps 200 in 1050ms
 âœ“ Compiled /api/apps/[id]/render in 254ms (176 modules)
ğŸ¨ Rendering app: undefined
 GET /api/apps/undefined/render 404 in 653ms
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ARÃ—æ•™è‚²Ã—ã‚²ãƒ¼ãƒ Ã—SNSã‚’èåˆã—ãŸé©æ–°çš„å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 4210ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ
ğŸš¨ [URGENT-FIX] Modified what for gaming: ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç†
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ARÃ—æ•™è‚²Ã—ã‚²ãƒ¼ãƒ Ã—SNSã‚’èåˆã—ãŸé©æ–°çš„å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
ğŸ” [PATTERN] Keywords found: [ 'education' ]
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.545 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.540 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.059 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.054 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: lms-platform (score=0.545)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç† ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢é€£ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ® [CATEGORY-OVERRIDE] Gaming/Database detected, forcing creative
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: creative
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Creative Portfolio Showcase', score: 114.5 },
  { name: 'Gaming & Entertainment Hub', score: 114.5 },
  { name: 'Culinary Recipe Collection', score: 108 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Modern Analytics Dashboard', score: 66.5 },
  { name: 'Clean Productivity App', score: 57.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Professional SaaS Platform', score: 43 }
]
âœ… Selected template: Creative Portfolio Showcase
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç† ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢é€£ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ® [CATEGORY-OVERRIDE] Gaming/Database detected, forcing creative
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: creative
ğŸš¨ [CONTEXT-FIX] Forced category to creative for gaming
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ”— Fetching Figma design from: https://www.figma.com/design/creative-portfolio-template
âš ï¸ Failed to fetch Figma design, using default customization: Error: Invalid Figma URL format
    at FigmaDesignExtractor.fetchDesignFromUrl (webpack-internal:///(rsc)/./lib/figma-api.ts:433:19)
    at IntelligentFigmaSelector.customizeTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:188:98)
    at IntelligentFigmaSelector.selectOptimalTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:74:46)
    at POST (webpack-internal:///(rsc)/./app/api/intelligent-generate/route.ts:56:130)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
ğŸ“ˆ Template scores: [
  { name: 'Creative Portfolio Showcase', score: 114.5 },
  { name: 'Gaming & Entertainment Hub', score: 114.5 },
  { name: 'Culinary Recipe Collection', score: 108 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Modern Analytics Dashboard', score: 66.5 },
  { name: 'Clean Productivity App', score: 57.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Professional SaaS Platform', score: 43 }
]
âœ… Template selected: Creative Portfolio Showcase
ğŸ¨ Design reasoning: ã€Œcreativeã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
âœ… Gemini API responded in 7528ms
Schema inference error: SyntaxError: Unexpected token , in JSON at position 889
    at JSON.parse (<anonymous>)
    at POST (webpack-internal:///(rsc)/./app/api/infer-schema/route.ts:770:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
Using fallback schema inference
 POST /api/infer-schema 200 in 43990ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: custom_data
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 48295ms
ğŸ”§ [OPENAI-INIT] Initializing OpenAI client...
ğŸ”§ [OPENAI-INIT] API Key exists: true
ğŸ”§ [OPENAI-INIT] API Key length: 164
ğŸ”§ [OPENAI-INIT] API Key starts with sk-: true
âœ… [OPENAI-INIT] OpenAI API key validation passed
âœ… [OPENAI-INIT] OpenAI client initialized successfully
 POST /api/generate-simple 400 in 70ms
ğŸ’¾ Saving new app to Supabase...
âœ… App saved successfully: fcd2ab9b-0c20-4800-a51e-056f5f7e987b
 POST /api/apps 200 in 788ms
ğŸ¨ Rendering app: undefined
 GET /api/apps/undefined/render 404 in 33ms
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 3098ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ” [PATTERN] Keywords found: []
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.045 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.040 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.059 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.054 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: property-listing (score=0.059)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Selected template: Clean Productivity App
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Template selected: Clean Productivity App
ğŸ¨ Design reasoning: ã€Œproductivityã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
âœ… Gemini API responded in 5078ms
 POST /api/infer-schema 200 in 9849ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: notes
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 13025ms
ğŸ’¾ Saving new app to Supabase...
âœ… App saved successfully: f22c2a1f-ba00-42b8-b2cc-8daeb8526486
 POST /api/apps 200 in 964ms
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 3002ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ” [PATTERN] Keywords found: []
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.045 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.040 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.059 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.054 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: property-listing (score=0.059)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Selected template: Clean Productivity App
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Template selected: Clean Productivity App
ğŸ¨ Design reasoning: ã€Œproductivityã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
ğŸ’¾ Using cached UI preparation
âœ… Gemini API responded in 2959ms
 POST /api/infer-schema 200 in 11002ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: memos
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 14062ms
ğŸ’¾ Saving new app to Supabase...
âœ… App saved successfully: 3f8ba79d-fe28-48da-a7e2-d658eaf3dd26
 POST /api/apps 200 in 918ms
ğŸ¨ Rendering app: 3f8ba79d-fe28-48da-a7e2-d658eaf3dd26
 GET /api/apps/3f8ba79d-fe28-48da-a7e2-d658eaf3dd26/render 404 in 23ms
 âœ“ Compiled in 50ms
 âœ“ Compiled /api/intelligent-generate in 176ms (65 modules)
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 3910ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ” [PATTERN] Keywords found: []
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.045 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.040 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.059 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.054 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: property-listing (score=0.059)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Selected template: Clean Productivity App
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Template selected: Clean Productivity App
ğŸ¨ Design reasoning: ã€Œproductivityã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
 âœ“ Compiled /api/infer-schema in 127ms (69 modules)
âœ… Gemini API responded in 3615ms
 POST /api/infer-schema 200 in 16361ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: notes
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 20534ms
 âœ“ Compiled /api/apps in 56ms (167 modules)
ğŸ’¾ Saving new app to Supabase...
âœ… App saved successfully: 4374a8c7-f5d1-405d-ae61-b1f4783f9f7f
 POST /api/apps 200 in 1032ms
 âš  ./app/api/apps/[id]/render/route.ts
Attempted import error: 'getGeneratedApp' is not exported from '@/lib/supabase' (imported as 'getGeneratedApp').

Import trace for requested module:
./app/api/apps/[id]/render/route.ts
ğŸ¨ Rendering app: 4374a8c7-f5d1-405d-ae61-b1f4783f9f7f
âŒ Error rendering app 4374a8c7-f5d1-405d-ae61-b1f4783f9f7f: TypeError: (0 , _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.getGeneratedApp) is not a function
    at GET (webpack-internal:///(rsc)/./app/api/apps/[id]/render/route.ts:16:89)
    at /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57234
    at /home/rinta/MATURA-claude/node_modules/next/dist/server/lib/trace/tracer.js:140:36
    at NoopContextManager.with (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:7062)
    at ContextAPI.with (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:518)
    at NoopTracer.startActiveSpan (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:18093)
    at ProxyTracer.startActiveSpan (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:18854)
    at /home/rinta/MATURA-claude/node_modules/next/dist/server/lib/trace/tracer.js:122:103
    at NoopContextManager.with (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:7062)
    at ContextAPI.with (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:518)
    at NextTracerImpl.trace (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/trace/tracer.js:122:28)
    at /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:48896
    at AsyncLocalStorage.run (node:async_hooks:338:14)
    at Object.wrap (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:40958)
    at /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:47472
    at AsyncLocalStorage.run (node:async_hooks:338:14)
    at Object.wrap (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:38293)
    at /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:47434
    at AsyncLocalStorage.run (node:async_hooks:338:14)
    at eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46881)
    at eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58771)
    at doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:60)
    at cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1576:46)
    at ResponseCache.get (/home/rinta/MATURA-claude/node_modules/next/dist/server/response-cache/index.js:49:26)
    at DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:53)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
 GET /api/apps/4374a8c7-f5d1-405d-ae61-b1f4783f9f7f/render 500 in 238ms
 â—‹ Compiling /api/apps/[id]/render ...
 âœ“ Compiled /api/apps/[id]/render in 157ms (169 modules)
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 4948ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ” [PATTERN] Keywords found: []
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.045 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.040 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.059 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.054 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: property-listing (score=0.059)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Selected template: Clean Productivity App
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Template selected: Clean Productivity App
ğŸ¨ Design reasoning: ã€Œproductivityã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
âœ… Gemini API responded in 3547ms
 POST /api/infer-schema 200 in 11018ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: memos
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 16037ms
ğŸ’¾ Saving new app to Supabase...
âœ… App saved successfully: 5c3b0d66-9fc8-48c7-8831-d6bc37508e5e
 POST /api/apps 200 in 431ms
ğŸ¨ Rendering app: 5c3b0d66-9fc8-48c7-8831-d6bc37508e5e
âœ… Successfully rendered app: 5c3b0d66-9fc8-48c7-8831-d6bc37508e5e
 GET /api/apps/5c3b0d66-9fc8-48c7-8831-d6bc37508e5e/render 200 in 145ms
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 3302ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ” [PATTERN] Keywords found: [ 'real-estate' ]
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.045 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.040 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.545 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.540 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: property-listing (score=0.545)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 4
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Selected template: Clean Productivity App
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 4
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ”— Fetching Figma design from: https://www.figma.com/design/productivity-minimal-template
âš ï¸ Failed to fetch Figma design, using default customization: Error: Invalid Figma URL format
    at FigmaDesignExtractor.fetchDesignFromUrl (webpack-internal:///(rsc)/./lib/figma-api.ts:433:19)
    at IntelligentFigmaSelector.customizeTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:188:98)
    at IntelligentFigmaSelector.selectOptimalTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:74:46)
    at POST (webpack-internal:///(rsc)/./app/api/intelligent-generate/route.ts:56:130)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Template selected: Clean Productivity App
ğŸ¨ Design reasoning: ã€Œproductivityã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
âœ… Gemini API responded in 3925ms
 POST /api/infer-schema 200 in 13920ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: tasks
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 17250ms
 âœ“ Compiled /api/generate-simple in 166ms (174 modules)
ğŸ”§ [OPENAI-INIT] Initializing OpenAI client...
ğŸ”§ [OPENAI-INIT] API Key exists: true
ğŸ”§ [OPENAI-INIT] API Key length: 164
ğŸ”§ [OPENAI-INIT] API Key starts with sk-: true
âœ… [OPENAI-INIT] OpenAI API key validation passed
âœ… [OPENAI-INIT] OpenAI client initialized successfully
 POST /api/generate-simple 400 in 233ms
ğŸ’¾ Saving new app to Supabase...
âœ… App saved successfully: 1d164748-f63f-4812-8677-1e5fffda33e2
 POST /api/apps 200 in 1058ms
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ARÃ—æ•™è‚²Ã—ã‚²ãƒ¼ãƒ Ã—SNSã‚’èåˆã—ãŸé©æ–°çš„å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 4494ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ
ğŸš¨ [URGENT-FIX] Modified what for gaming: ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç†
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ARÃ—æ•™è‚²Ã—ã‚²ãƒ¼ãƒ Ã—SNSã‚’èåˆã—ãŸé©æ–°çš„å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
ğŸ” [PATTERN] Keywords found: [ 'education' ]
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.545 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.540 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.059 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.054 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: lms-platform (score=0.545)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç† ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢é€£ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ® [CATEGORY-OVERRIDE] Gaming/Database detected, forcing creative
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: creative
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Creative Portfolio Showcase', score: 114.5 },
  { name: 'Gaming & Entertainment Hub', score: 114.5 },
  { name: 'Culinary Recipe Collection', score: 108 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Modern Analytics Dashboard', score: 66.5 },
  { name: 'Clean Productivity App', score: 57.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Professional SaaS Platform', score: 43 }
]
âœ… Selected template: Creative Portfolio Showcase
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç† ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢é€£ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ® [CATEGORY-OVERRIDE] Gaming/Database detected, forcing creative
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: creative
ğŸš¨ [CONTEXT-FIX] Forced category to creative for gaming
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ”— Fetching Figma design from: https://www.figma.com/design/creative-portfolio-template
âš ï¸ Failed to fetch Figma design, using default customization: Error: Invalid Figma URL format
    at FigmaDesignExtractor.fetchDesignFromUrl (webpack-internal:///(rsc)/./lib/figma-api.ts:433:19)
    at IntelligentFigmaSelector.customizeTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:188:98)
    at IntelligentFigmaSelector.selectOptimalTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:74:46)
    at POST (webpack-internal:///(rsc)/./app/api/intelligent-generate/route.ts:56:130)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
ğŸ“ˆ Template scores: [
  { name: 'Creative Portfolio Showcase', score: 114.5 },
  { name: 'Gaming & Entertainment Hub', score: 114.5 },
  { name: 'Culinary Recipe Collection', score: 108 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Modern Analytics Dashboard', score: 66.5 },
  { name: 'Clean Productivity App', score: 57.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Professional SaaS Platform', score: 43 }
]
âœ… Template selected: Creative Portfolio Showcase
ğŸ¨ Design reasoning: ã€Œcreativeã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
âœ… Gemini API responded in 9665ms
Schema inference error: SyntaxError: Unexpected token , in JSON at position 586
    at JSON.parse (<anonymous>)
    at POST (webpack-internal:///(rsc)/./app/api/infer-schema/route.ts:770:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
Using fallback schema inference
 POST /api/infer-schema 200 in 33595ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: custom_data
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 38129ms
 POST /api/generate-simple 400 in 15ms
ğŸ’¾ Saving new app to Supabase...
âœ… App saved successfully: 52bcbf79-0d26-4ec9-aa9e-e10341c78e9e
 POST /api/apps 200 in 942ms
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 3249ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
ğŸ” [PATTERN] Keywords found: [ 'real-estate' ]
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.045 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.040 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.545 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.540 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: property-listing (score=0.545)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 4
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Selected template: Clean Productivity App
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„ ã‚’ä½œã‚ŠãŸã„ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 4
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: productivity
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ”— Fetching Figma design from: https://www.figma.com/design/productivity-minimal-template
âš ï¸ Failed to fetch Figma design, using default customization: Error: Invalid Figma URL format
    at FigmaDesignExtractor.fetchDesignFromUrl (webpack-internal:///(rsc)/./lib/figma-api.ts:433:19)
    at IntelligentFigmaSelector.customizeTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:188:98)
    at IntelligentFigmaSelector.selectOptimalTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:74:46)
    at POST (webpack-internal:///(rsc)/./app/api/intelligent-generate/route.ts:56:130)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
ğŸ“ˆ Template scores: [
  { name: 'Clean Productivity App', score: 97.5 },
  { name: 'Modern Analytics Dashboard', score: 86.5 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Professional SaaS Platform', score: 63 },
  { name: 'Creative Portfolio Showcase', score: 59.5 },
  { name: 'Gaming & Entertainment Hub', score: 59.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Culinary Recipe Collection', score: 53 }
]
âœ… Template selected: Clean Productivity App
ğŸ¨ Design reasoning: ã€Œproductivityã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
âœ… Gemini API responded in 3798ms
 POST /api/infer-schema 200 in 16524ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: tasks
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 19815ms
 POST /api/generate-simple 400 in 10ms
ğŸ’¾ Saving new app to Supabase...
âœ… App saved successfully: 7e20f47f-dfb1-4331-b183-502c4996486a
 POST /api/apps 200 in 573ms
ğŸ¨ Rendering app: 7e20f47f-dfb1-4331-b183-502c4996486a
âœ… Successfully rendered app: 7e20f47f-dfb1-4331-b183-502c4996486a
 GET /api/apps/7e20f47f-dfb1-4331-b183-502c4996486a/render 200 in 172ms
ğŸš€ Starting intelligent generation process...
ğŸ“ User input: ARÃ—æ•™è‚²Ã—ã‚²ãƒ¼ãƒ Ã—SNSã‚’èåˆã—ãŸé©æ–°çš„å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
ğŸ¤– Analyzing requirements with Gemini...
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 4387ms
âš ï¸ Failed to parse Gemini analysis, proceeding with default options
ğŸ¯ Selecting optimal template with enhanced analysis...
ğŸ” Analyzing user input...
ğŸš¨ [URGENT-FIX] Original what: ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨æ“ä½œ
ğŸš¨ [URGENT-FIX] Modified what for gaming: ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç†
ğŸ­ Checking industry-specific patterns...
ğŸ” [PATTERN] Input: ARÃ—æ•™è‚²Ã—ã‚²ãƒ¼ãƒ Ã—SNSã‚’èåˆã—ãŸé©æ–°çš„å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
ğŸ” [PATTERN] Keywords found: [ 'education' ]
ğŸ” [PATTERN] medical-appointment: score=0.045 (industry=healthcare)
ğŸ” [PATTERN] pharmacy-inventory: score=0.040 (industry=healthcare)
ğŸ” [PATTERN] lms-platform: score=0.545 (industry=education)
ğŸ” [PATTERN] school-administration: score=0.540 (industry=education)
ğŸ” [PATTERN] expense-tracker: score=0.045 (industry=finance)
ğŸ” [PATTERN] investment-portfolio: score=0.040 (industry=finance)
ğŸ” [PATTERN] hotel-reservation: score=0.045 (industry=hospitality)
ğŸ” [PATTERN] restaurant-pos: score=0.040 (industry=hospitality)
ğŸ” [PATTERN] delivery-tracking: score=0.045 (industry=logistics)
ğŸ” [PATTERN] warehouse-management: score=0.040 (industry=logistics)
ğŸ” [PATTERN] property-listing: score=0.059 (industry=real-estate)
ğŸ” [PATTERN] property-management: score=0.054 (industry=real-estate)
ğŸ” [PATTERN] marketplace-platform: score=0.045 (industry=ecommerce)
ğŸ” [PATTERN] subscription-commerce: score=0.040 (industry=ecommerce)
ğŸ” [PATTERN] Best match: lms-platform (score=0.545)
ğŸ” [PATTERN] Threshold check: FAIL
ğŸ“‹ Using general pattern matching...
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç† ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢é€£ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ® [CATEGORY-OVERRIDE] Gaming/Database detected, forcing creative
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: creative
ğŸ“Š Scoring templates...
ğŸ“ˆ Template scores: [
  { name: 'Creative Portfolio Showcase', score: 114.5 },
  { name: 'Gaming & Entertainment Hub', score: 114.5 },
  { name: 'Culinary Recipe Collection', score: 108 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Modern Analytics Dashboard', score: 66.5 },
  { name: 'Clean Productivity App', score: 57.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Professional SaaS Platform', score: 43 }
]
âœ… Selected template: Creative Portfolio Showcase
ğŸ¨ Deriving design context...
ğŸ” [CATEGORY-DEBUG] AllText: åŠ¹ç‡æ€§ã¨åˆ©ä¾¿æ€§ã®å‘ä¸Š ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚²ãƒ¼ãƒ æ”»ç•¥ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰µä½œçš„ç®¡ç† ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢é€£ ç”Ÿç”£æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã®å‘ä¸Š
ğŸ” [CATEGORY-DEBUG] Current bestCategory before override: productivity maxScore: 6
ğŸ® [CATEGORY-OVERRIDE] Gaming/Database detected, forcing creative
ğŸ” [CATEGORY-DEBUG] Final bestCategory after override: creative
ğŸš¨ [CONTEXT-FIX] Forced category to creative for gaming
ğŸŒˆ Generating color personality...
ğŸ”§ Customizing template...
ğŸ”— Fetching Figma design from: https://www.figma.com/design/creative-portfolio-template
âš ï¸ Failed to fetch Figma design, using default customization: Error: Invalid Figma URL format
    at FigmaDesignExtractor.fetchDesignFromUrl (webpack-internal:///(rsc)/./lib/figma-api.ts:433:19)
    at IntelligentFigmaSelector.customizeTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:188:98)
    at IntelligentFigmaSelector.selectOptimalTemplate (webpack-internal:///(rsc)/./lib/intelligent-figma-selector.ts:74:46)
    at POST (webpack-internal:///(rsc)/./app/api/intelligent-generate/route.ts:56:130)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
ğŸ“ˆ Template scores: [
  { name: 'Creative Portfolio Showcase', score: 114.5 },
  { name: 'Gaming & Entertainment Hub', score: 114.5 },
  { name: 'Culinary Recipe Collection', score: 108 },
  { name: 'Social Community Platform', score: 73 },
  { name: 'Modern Analytics Dashboard', score: 66.5 },
  { name: 'Clean Productivity App', score: 57.5 },
  { name: 'Modern E-commerce Store', score: 53 },
  { name: 'Professional SaaS Platform', score: 43 }
]
âœ… Template selected: Creative Portfolio Showcase
ğŸ¨ Design reasoning: ã€Œcreativeã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã€‚modernãªå°è±¡ã‚’ä¸ãˆã‚‹modernãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¡ç”¨ã€‚ã‚ãªãŸã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ€§æ ¼ã«åˆã‚ã›ã¦é…è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€‚efficiencyã‚’æœ€å¤§åŒ–ã™ã‚‹è¦ç´ é…ç½®ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šã‚’è¨­è¨ˆã€‚
ğŸš€ Starting parallel processing for performance optimization...
ğŸ¤– Calling Gemini API...
âš¡ Preparing UI generation in parallel...
ğŸ’¾ Using cached UI preparation
âœ… Gemini API responded in 9845ms
Schema inference error: SyntaxError: Unexpected token , in JSON at position 889
    at JSON.parse (<anonymous>)
    at POST (webpack-internal:///(rsc)/./app/api/infer-schema/route.ts:770:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
Using fallback schema inference
 POST /api/infer-schema 200 in 40117ms
âš ï¸ Failed to parse Gemini schema, trying fallback
âœ… Fallback schema generated: custom_data
ğŸ¨ Generating ultra premium UI components...
ğŸ¨ Starting dynamic UI customization...
ğŸ“ Using pattern-based generation
âœ… Dynamic UI customization completed
âœ… Ultra premium UI generation completed with cinematic animations
ğŸ‰ Intelligent generation completed successfully
 POST /api/intelligent-generate 200 in 44532ms
 POST /api/generate-simple 400 in 10ms
ğŸ’¾ Saving new app to Supabase...
âœ… App saved successfully: 8ec2ab23-ee46-4263-846a-77845fadf7d6
 POST /api/apps 200 in 1876ms
ğŸ¨ Rendering app: 8ec2ab23-ee46-4263-846a-77845fadf7d6
âœ… Successfully rendered app: 8ec2ab23-ee46-4263-846a-77845fadf7d6
 GET /api/apps/8ec2ab23-ee46-4263-846a-77845fadf7d6/render 200 in 218ms
 âœ“ Compiled in 105ms
