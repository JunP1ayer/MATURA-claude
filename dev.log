npm WARN config cache-min This option has been deprecated in favor of `--prefer-offline`.

> matura-mvp@2.0.0 dev
> npx next dev -H 0.0.0.0

npm WARN config cache-min This option has been deprecated in favor of `--prefer-offline`.
  â–² Next.js 14.2.30
  - Local:        http://localhost:3000
  - Network:      http://0.0.0.0:3000
  - Environments: .env.local, .env

 âœ“ Starting...
 âœ“ Ready in 1841ms
 âœ“ Compiled /api/generate in 454ms (62 modules)
ğŸ”§ [OPENAI-INIT] Initializing OpenAI client...
ğŸ”§ [OPENAI-INIT] API Key exists: true
ğŸ”§ [OPENAI-INIT] API Key length: 164
ğŸ”§ [OPENAI-INIT] API Key starts with sk-: true
âœ… [OPENAI-INIT] OpenAI API key validation passed
âœ… [OPENAI-INIT] OpenAI client initialized successfully
 GET /api/generate 200 in 669ms
=== API Generate Route (Hybrid AI) Called ===
Request body: { idea: 'test' }
ğŸ­ [GENERATE-API] Starting hybrid AI generation for: test
ğŸ­ [HYBRID] Starting multi-AI generation process
ğŸ¯ [HYBRID] Mode: balanced, Creativity: medium
ğŸ” [GEMINI] Direct feature extraction started
âš ï¸ [GEMINI] Category classification DISABLED - using pure feature extraction
ğŸ¤– Calling Gemini API...
ğŸ¨ [GEMINI] Design inspiration generation started
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 4654ms
ğŸ” [JSON] Extracting from Gemini response
ğŸ” [JSON] Raw response: ```json
{
  "colorPalette": ["#2E8BC0", "#F2F2F2", "#FFB347", "#1A202C"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Open Sans",
    "accent": "Roboto Condensed"
  },
  "components": ["buttons", "cards", "progress bars", "tooltips"],
  "layout": "grid",
  "mood": "calm",
  "inspiration": "Clean lines, subtle gradients, and a focus on functionality inspired by Scandinavian design and minimalist web applications."
}
```

ğŸ” [JSON] Response length: 463
ğŸ” [JSON] Trying pattern 1: /\{[\s\S]*?\}/
ğŸ” [JSON] Pattern 1 matches: 1
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#2E8BC0", "#F2F2F2", "#FFB347", "#1A202C"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Open Sans",
    "accent": "Roboto Condensed"
  }...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#2E8BC0", "#F2F2F2", "#FFB347", "#1A202C"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Open Sans", "accent": "Roboto Condensed" }...
âš ï¸ [JSON] Pattern 1 failed: Unexpected end of JSON input
ğŸ” [JSON] Trying pattern 2: /```json\s*(\{[\s\S]*?\})\s*```/i
ğŸ” [JSON] Pattern 2 matches: 2
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#2E8BC0", "#F2F2F2", "#FFB347", "#1A202C"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Open Sans",
    "accent": "Roboto Condensed"
  },
...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#2E8BC0", "#F2F2F2", "#FFB347", "#1A202C"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Open Sans", "accent": "Roboto Condensed" }, "components": ["butt...
âœ… [JSON] Successfully parsed with pattern 2
âœ… [GEMINI] Design inspiration completed
âœ… Gemini API responded in 5757ms
ğŸ” [FEATURE-EXTRACT] Analyzing Gemini response for features...
âœ… [FEATURE-EXTRACT] Successfully parsed JSON
ğŸ” [FEATURE-EXTRACT] Found features: 6
âœ… [GEMINI] Direct feature extraction completed
ğŸ” [GEMINI] Extracted features: [ 'ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆæ©Ÿèƒ½', 'ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ©Ÿèƒ½', 'ãƒ†ã‚¹ãƒˆçµæœè¡¨ç¤ºæ©Ÿèƒ½' ]
ğŸ¯ [FIGMA] Design system integration started
âœ… [FIGMA] Successfully fetched design data
âœ… [FIGMA] Design tokens extracted successfully
ğŸ¨ [FIGMA] Colors: [ '#000000', '#ffffff', '#5551ff' ]
ğŸ“ [FIGMA] Typography: Figma Hand
ğŸ§© [FIGMA] Components: [ 'Button', 'Input', 'Card' ]
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
âš¡ [OPENAI] High-quality code generation started
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
 POST /api/generate 200 in 14991ms
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1208, Quality: 1
âœ… [OPENAI] Schema generation completed
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1223, Quality: 1
âœ… [OPENAI] Schema generation completed
ğŸ”„ [OPENAI] Starting Function Calling for component generation
ğŸ”„ [OPENAI] Category: null
ğŸ”„ [OPENAI] Enhanced idea: ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ†ã‚¹ãƒˆå®Ÿè¡Œç’°å¢ƒã‚’æä¾›ã™ã‚‹ã‚¢ãƒ—ãƒªã€‚ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä½œæˆã€å®Ÿè¡Œã€çµæœã®ç¢ºèªã‚’åŠ¹ç‡çš„ã«è¡Œãˆã‚‹æ©Ÿèƒ½ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚å®‰å®šæ€§ã¨ä¿¡é ¼æ€§ã‚’é‡è¦–ã—ãŸè¨­è¨ˆã§ã™ã€‚
ğŸ”„ [OPENAI] Key Features: [
  'ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆæ©Ÿèƒ½',
  'ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ©Ÿèƒ½',
  'ãƒ†ã‚¹ãƒˆçµæœè¡¨ç¤ºæ©Ÿèƒ½',
  'ãƒ­ã‚°å‡ºåŠ›æ©Ÿèƒ½',
  'ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ©Ÿèƒ½',
  'ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†æ©Ÿèƒ½'
]
ğŸ” [FEATURE-UI] Generating UI guidelines for features: [ 'ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆæ©Ÿèƒ½', 'ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ©Ÿèƒ½', 'ãƒ†ã‚¹ãƒˆçµæœè¡¨ç¤ºæ©Ÿèƒ½' ]
ğŸ§ [FEATURE-UI] Required components: [ 'ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ', 'ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒœã‚¿ãƒ³', 'çµæœè¡¨ç¤ºãƒªã‚¹ãƒˆ' ]
ğŸ¯ [OPENAI] Using feature-based UI guidelines instead of category classification
ğŸ“ [OPENAI] Prompt length: 4455 characters
ğŸ“ [OPENAI] Estimated tokens: 1114
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_hybrid_react_component with gpt-4
=== API Generate Route (Hybrid AI) Called ===
Request body: { idea: 'ARæ•™è‚²Ã—SNSèåˆå­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½œã‚ŠãŸã„', mode: 'balanced' }
ğŸ­ [GENERATE-API] Starting hybrid AI generation for: ARæ•™è‚²Ã—SNSèåˆå­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½œã‚ŠãŸã„
ğŸ­ [HYBRID] Starting multi-AI generation process
ğŸ¯ [HYBRID] Mode: balanced, Creativity: medium
ğŸ” [GEMINI] Direct feature extraction started
âš ï¸ [GEMINI] Category classification DISABLED - using pure feature extraction
ğŸ¤– Calling Gemini API...
ğŸ¨ [GEMINI] Design inspiration generation started
ğŸ¤– Calling Gemini API...
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âŒ [OPENAI-OPTIMIZED] generate_hybrid_react_component failed: SyntaxError: Unexpected token ` in JSON at position 57
    at JSON.parse (<anonymous>)
    at OpenAIOptimizedSystem.executeFunction (webpack-internal:///(rsc)/./lib/openai-optimized-system.ts:123:37)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async HybridAIOrchestrator.generateCodeWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:1724:28)
    at async Promise.all (index 1)
    at async HybridAIOrchestrator.generateApp (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:44:44)
    at async POST (webpack-internal:///(rsc)/./app/api/generate/route.ts:30:30)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
âš ï¸ [OPENAI] Function calling failed, attempting text generation
âš ï¸ [OPENAI] Failure reason: Unexpected token ` in JSON at position 57
âš ï¸ [OPENAI] Attempting fallback with direct prompt...
ğŸ¨ [OPENAI-OPTIMIZED] Generating technical text with gpt-4
âœ… Gemini API responded in 4765ms
ğŸ” [JSON] Extracting from Gemini response
ğŸ” [JSON] Raw response: ```json
{
  "colorPalette": ["#29ABE2", "#FFC85E", "#A7D1AB", "#F2F2F2"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Open Sans",
    "accent": "Roboto Condensed"
  },
  "components": ["cards with AR markers", "3D model viewers", "interactive quizzes", "progress bars", "user profiles", "comment sections", "notification system", "in-app messaging", "leaderboards"],
  "layout": "card",
  "mood": "energetic",
  "inspiration": "A blend of sleek educational platforms like Khan Academy and the vibrant social interaction of platforms like Instagram, incorporating augmented reality elements reminiscent of Pokemon Go's gameplay for engaging learning experiences."
}
```

ğŸ” [JSON] Response length: 709
ğŸ” [JSON] Trying pattern 1: /\{[\s\S]*?\}/
ğŸ” [JSON] Pattern 1 matches: 1
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#29ABE2", "#FFC85E", "#A7D1AB", "#F2F2F2"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Open Sans",
    "accent": "Roboto Condensed"
  }...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#29ABE2", "#FFC85E", "#A7D1AB", "#F2F2F2"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Open Sans", "accent": "Roboto Condensed" }...
âš ï¸ [JSON] Pattern 1 failed: Unexpected end of JSON input
ğŸ” [JSON] Trying pattern 2: /```json\s*(\{[\s\S]*?\})\s*```/i
ğŸ” [JSON] Pattern 2 matches: 2
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#29ABE2", "#FFC85E", "#A7D1AB", "#F2F2F2"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Open Sans",
    "accent": "Roboto Condensed"
  },
...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#29ABE2", "#FFC85E", "#A7D1AB", "#F2F2F2"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Open Sans", "accent": "Roboto Condensed" }, "components": ["card...
âš ï¸ [JSON] Pattern 2 failed: Unexpected token s in JSON at position 620
ğŸ” [JSON] Trying pattern 3: /```\s*(\{[\s\S]*?\})\s*```/
ğŸ” [JSON] Pattern 3 matches: 0
âš ï¸ [JSON] Pattern 3 found no matches
ğŸ” [JSON] Trying pattern 4: /json\s*:\s*(\{[\s\S]*?\})/i
ğŸ” [JSON] Pattern 4 matches: 0
âš ï¸ [JSON] Pattern 4 found no matches
ğŸ” [JSON] Trying pattern 5: /response\s*:\s*(\{[\s\S]*?\})/i
ğŸ” [JSON] Pattern 5 matches: 0
âš ï¸ [JSON] Pattern 5 found no matches
ğŸ” [JSON] Trying pattern 6: /\{[\s\S]*"enhanced"[\s\S]*\}/
ğŸ” [JSON] Pattern 6 matches: 0
âš ï¸ [JSON] Pattern 6 found no matches
ğŸ” [JSON] Trying pattern 7: /\{[^{}]*"category"[^{}]*\}/
ğŸ” [JSON] Pattern 7 matches: 0
âš ï¸ [JSON] Pattern 7 found no matches
ğŸ” [JSON] Trying pattern 8: /\{[\s\S]+\}/
ğŸ” [JSON] Pattern 8 matches: 1
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#29ABE2", "#FFC85E", "#A7D1AB", "#F2F2F2"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Open Sans",
    "accent": "Roboto Condensed"
  },
...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#29ABE2", "#FFC85E", "#A7D1AB", "#F2F2F2"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Open Sans", "accent": "Roboto Condensed" }, "components": ["card...
âš ï¸ [JSON] Pattern 8 failed: Unexpected token s in JSON at position 620
âš ï¸ [JSON] All parsing attempts failed, using text analysis: No valid JSON found in any pattern
ğŸ”§ [FALLBACK] Creating simple analysis
âœ… [GEMINI] Design inspiration completed
âœ… Gemini API responded in 5889ms
ğŸ” [FEATURE-EXTRACT] Analyzing Gemini response for features...
âœ… [FEATURE-EXTRACT] Successfully parsed JSON
ğŸ” [FEATURE-EXTRACT] Found features: 6
âœ… [GEMINI] Direct feature extraction completed
ğŸ” [GEMINI] Extracted features: [ 'ARã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆæ©Ÿèƒ½', 'SNSé€£æºå­¦ç¿’æ©Ÿèƒ½', 'å­¦ç¿’é€²æ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ' ]
ğŸ¯ [FIGMA] Design system integration started
âœ… [FIGMA] Successfully fetched design data
âœ… [FIGMA] Design tokens extracted successfully
ğŸ¨ [FIGMA] Colors: [ '#000000', '#ffffff', '#5551ff' ]
ğŸ“ [FIGMA] Typography: Figma Hand
ğŸ§© [FIGMA] Components: [ 'Button', 'Input', 'Card' ]
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
âš¡ [OPENAI] High-quality code generation started
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
 POST /api/generate 200 in 29953ms
=== API Generate Route (Hybrid AI) Called ===
Request body: { idea: 'æ‰¶é¤Šæ§é™¤ãƒã‚§ãƒƒã‚«ãƒ¼ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã—ãŸã„ã€‚å¹´åã¨å®¶æ—æ§‹æˆã‹ã‚‰æœ€é©ãªåƒãæ–¹ã‚’ææ¡ˆ', mode: 'balanced' }
ğŸ­ [GENERATE-API] Starting hybrid AI generation for: æ‰¶é¤Šæ§é™¤ãƒã‚§ãƒƒã‚«ãƒ¼ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã—ãŸã„ã€‚å¹´åã¨å®¶æ—æ§‹æˆã‹ã‚‰æœ€é©ãªåƒãæ–¹ã‚’ææ¡ˆ
ğŸ­ [HYBRID] Starting multi-AI generation process
ğŸ¯ [HYBRID] Mode: balanced, Creativity: medium
ğŸ” [GEMINI] Direct feature extraction started
âš ï¸ [GEMINI] Category classification DISABLED - using pure feature extraction
ğŸ¤– Calling Gemini API...
ğŸ¨ [GEMINI] Design inspiration generation started
ğŸ¤– Calling Gemini API...
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1324, Quality: 1
âœ… [OPENAI] Schema generation completed
âœ… [OPENAI-OPTIMIZED] technical text generated successfully
âœ… [OPENAI] Text generation fallback successful
ğŸ‰ [HYBRID] Multi-AI generation completed successfully
âœ… [GENERATE-API] Generation completed with category: null
âœ… Gemini API responded in 4934ms
ğŸ” [JSON] Extracting from Gemini response
ğŸ” [JSON] Raw response: ```json
{
  "colorPalette": ["#3498db", "#2ecc71", "#e74c3c", "#f1f2f6"],
  "designStyle": "minimalist",
  "typography": {
    "heading": "Noto Sans JP",
    "body": "Noto Sans JP",
    "accent": "Roboto Condensed"
  },
  "components": ["Input fields (for income and family details)", "Segmented controls (for family member selection)", "Cards (to display potential scenarios)", "Charts (to visualize income and tax savings)", "Progress bars (to show eligibility progress)", "Buttons (clear, calculate, share)", "Interactive tables (to compare different scenarios)"],
  "layout": "card",
  "mood": "calm",
  "inspiration": "Clean and intuitive design inspired by Japanese minimalist aesthetics.  Focus on clear data visualization and easy navigation to avoid user confusion related to tax calculations.  Use of subtle animations to enhance user experience."
}
```

ğŸ” [JSON] Response length: 864
ğŸ” [JSON] Trying pattern 1: /\{[\s\S]*?\}/
ğŸ” [JSON] Pattern 1 matches: 1
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#3498db", "#2ecc71", "#e74c3c", "#f1f2f6"],
  "designStyle": "minimalist",
  "typography": {
    "heading": "Noto Sans JP",
    "body": "Noto Sans JP",
    "accent": "Roboto Cond...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#3498db", "#2ecc71", "#e74c3c", "#f1f2f6"], "designStyle": "minimalist", "typography": { "heading": "Noto Sans JP", "body": "Noto Sans JP", "accent": "Roboto Condensed" }...
âš ï¸ [JSON] Pattern 1 failed: Unexpected end of JSON input
ğŸ” [JSON] Trying pattern 2: /```json\s*(\{[\s\S]*?\})\s*```/i
ğŸ” [JSON] Pattern 2 matches: 2
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#3498db", "#2ecc71", "#e74c3c", "#f1f2f6"],
  "designStyle": "minimalist",
  "typography": {
    "heading": "Noto Sans JP",
    "body": "Noto Sans JP",
    "accent": "Roboto Cond...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#3498db", "#2ecc71", "#e74c3c", "#f1f2f6"], "designStyle": "minimalist", "typography": { "heading": "Noto Sans JP", "body": "Noto Sans JP", "accent": "Roboto Condensed" }, "compone...
âœ… [JSON] Successfully parsed with pattern 2
âœ… [GEMINI] Design inspiration completed
âœ… Gemini API responded in 7072ms
ğŸ” [FEATURE-EXTRACT] Analyzing Gemini response for features...
âœ… [FEATURE-EXTRACT] Successfully parsed JSON
ğŸ” [FEATURE-EXTRACT] Found features: 6
âœ… [GEMINI] Direct feature extraction completed
ğŸ” [GEMINI] Extracted features: [ 'æ‰¶é¤Šæ§é™¤åˆ¤å®šæ©Ÿèƒ½', 'æœ€é©ãªåƒãæ–¹ææ¡ˆæ©Ÿèƒ½', 'å¹´åå…¥åŠ›æ©Ÿèƒ½' ]
ğŸ¯ [FIGMA] Design system integration started
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1331, Quality: 1
âœ… [OPENAI] Schema generation completed
ğŸ”„ [OPENAI] Starting Function Calling for component generation
ğŸ”„ [OPENAI] Category: null
ğŸ”„ [OPENAI] Enhanced idea: ARæŠ€è¡“ã¨SNSã‚’çµ±åˆã—ãŸå­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã€ç¾å®Ÿä¸–ç•Œã¨ãƒ‡ã‚¸ã‚¿ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’èåˆã•ã›ã€å­¦ç¿’å†…å®¹ã‚’å…±æœ‰ãƒ»è­°è«–ã§ãã‚‹ç’°å¢ƒã‚’æä¾›ã—ã¾ã™ã€‚å­¦ç¿’åŠ¹æœã®å‘ä¸Šã¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å½¢æˆã‚’ç›®æŒ‡ã—ã¾ã™ã€‚
ğŸ”„ [OPENAI] Key Features: [
  'ARã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆæ©Ÿèƒ½',
  'SNSé€£æºå­¦ç¿’æ©Ÿèƒ½',
  'å­¦ç¿’é€²æ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ',
  'ARãƒãƒ¼ã‚«ãƒ¼èªè­˜æ©Ÿèƒ½',
  'å…±æœ‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é–²è¦§æ©Ÿèƒ½',
  'ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é€ä¿¡æ©Ÿèƒ½'
]
ğŸ” [FEATURE-UI] Generating UI guidelines for features: [ 'ARã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆæ©Ÿèƒ½', 'SNSé€£æºå­¦ç¿’æ©Ÿèƒ½', 'å­¦ç¿’é€²æ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ' ]
ğŸ§ [FEATURE-UI] Required components: [ 'ARãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ ', 'å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒªã‚¹ãƒˆ', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚«ãƒ¼ãƒ‰' ]
ğŸ¯ [OPENAI] Using feature-based UI guidelines instead of category classification
ğŸ“ [OPENAI] Prompt length: 5017 characters
ğŸ“ [OPENAI] Estimated tokens: 1255
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_hybrid_react_component with gpt-4
âœ… [FIGMA] Successfully fetched design data
âœ… [FIGMA] Design tokens extracted successfully
ğŸ¨ [FIGMA] Colors: [ '#000000', '#ffffff', '#5551ff' ]
ğŸ“ [FIGMA] Typography: Figma Hand
ğŸ§© [FIGMA] Components: [ 'Button', 'Input', 'Card' ]
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
âš¡ [OPENAI] High-quality code generation started
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1377, Quality: 1
âœ… [OPENAI] Schema generation completed
 POST /api/generate 200 in 29997ms
=== API Generate Route (Hybrid AI) Called ===
Request body: { idea: 'ãƒ¬ã‚·ãƒ”å…±æœ‰Ã—æ–™ç†å‹•ç”»SNSã‚¢ãƒ—ãƒª', mode: 'balanced' }
ğŸ­ [GENERATE-API] Starting hybrid AI generation for: ãƒ¬ã‚·ãƒ”å…±æœ‰Ã—æ–™ç†å‹•ç”»SNSã‚¢ãƒ—ãƒª
ğŸ­ [HYBRID] Starting multi-AI generation process
ğŸ¯ [HYBRID] Mode: balanced, Creativity: medium
ğŸ” [GEMINI] Direct feature extraction started
âš ï¸ [GEMINI] Category classification DISABLED - using pure feature extraction
ğŸ¤– Calling Gemini API...
ğŸ¨ [GEMINI] Design inspiration generation started
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 4969ms
ğŸ” [JSON] Extracting from Gemini response
ğŸ” [JSON] Raw response: ```json
{
  "colorPalette": ["#F28B82", "#F0E68C", "#A7D1AB", "#F5F5F5"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Open Sans",
    "accent": "Dancing Script"
  },
  "components": ["cards with recipe images and titles", "video player with integrated comments", "user profile section with follower/following count", "search bar with filters (cuisine, dietary restrictions)", "interactive recipe steps with progress indicators", "shopping list creation tool", "in-app messaging for collaboration"],
  "layout": "grid",
  "mood": "warm",
  "inspiration": "A clean and inviting kitchen, with pops of color from fresh ingredients.  The design should evoke a sense of community and shared culinary experiences, similar to Pinterest's visual appeal but with a strong focus on video content and interactive recipe elements."
}
```

ğŸ” [JSON] Response length: 865
ğŸ” [JSON] Trying pattern 1: /\{[\s\S]*?\}/
ğŸ” [JSON] Pattern 1 matches: 1
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#F28B82", "#F0E68C", "#A7D1AB", "#F5F5F5"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Open Sans",
    "accent": "Dancing Script"
  }...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#F28B82", "#F0E68C", "#A7D1AB", "#F5F5F5"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Open Sans", "accent": "Dancing Script" }...
âš ï¸ [JSON] Pattern 1 failed: Unexpected end of JSON input
ğŸ” [JSON] Trying pattern 2: /```json\s*(\{[\s\S]*?\})\s*```/i
ğŸ” [JSON] Pattern 2 matches: 2
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#F28B82", "#F0E68C", "#A7D1AB", "#F5F5F5"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Open Sans",
    "accent": "Dancing Script"
  },
  ...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#F28B82", "#F0E68C", "#A7D1AB", "#F5F5F5"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Open Sans", "accent": "Dancing Script" }, "components": ["cards ...
âš ï¸ [JSON] Pattern 2 failed: Unexpected token s in JSON at position 731
ğŸ” [JSON] Trying pattern 3: /```\s*(\{[\s\S]*?\})\s*```/
ğŸ” [JSON] Pattern 3 matches: 0
âš ï¸ [JSON] Pattern 3 found no matches
ğŸ” [JSON] Trying pattern 4: /json\s*:\s*(\{[\s\S]*?\})/i
ğŸ” [JSON] Pattern 4 matches: 0
âš ï¸ [JSON] Pattern 4 found no matches
ğŸ” [JSON] Trying pattern 5: /response\s*:\s*(\{[\s\S]*?\})/i
ğŸ” [JSON] Pattern 5 matches: 0
âš ï¸ [JSON] Pattern 5 found no matches
ğŸ” [JSON] Trying pattern 6: /\{[\s\S]*"enhanced"[\s\S]*\}/
ğŸ” [JSON] Pattern 6 matches: 0
âš ï¸ [JSON] Pattern 6 found no matches
ğŸ” [JSON] Trying pattern 7: /\{[^{}]*"category"[^{}]*\}/
ğŸ” [JSON] Pattern 7 matches: 0
âš ï¸ [JSON] Pattern 7 found no matches
ğŸ” [JSON] Trying pattern 8: /\{[\s\S]+\}/
ğŸ” [JSON] Pattern 8 matches: 1
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#F28B82", "#F0E68C", "#A7D1AB", "#F5F5F5"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Open Sans",
    "accent": "Dancing Script"
  },
  ...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#F28B82", "#F0E68C", "#A7D1AB", "#F5F5F5"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Open Sans", "accent": "Dancing Script" }, "components": ["cards ...
âš ï¸ [JSON] Pattern 8 failed: Unexpected token s in JSON at position 731
âš ï¸ [JSON] All parsing attempts failed, using text analysis: No valid JSON found in any pattern
ğŸ”§ [FALLBACK] Creating simple analysis
âœ… [GEMINI] Design inspiration completed
âœ… Gemini API responded in 5850ms
ğŸ” [FEATURE-EXTRACT] Analyzing Gemini response for features...
âœ… [FEATURE-EXTRACT] Successfully parsed JSON
ğŸ” [FEATURE-EXTRACT] Found features: 6
âœ… [GEMINI] Direct feature extraction completed
ğŸ” [GEMINI] Extracted features: [ 'ãƒ¬ã‚·ãƒ”å‹•ç”»æŠ•ç¨¿æ©Ÿèƒ½', 'ãƒ¬ã‚·ãƒ”æ¤œç´¢æ©Ÿèƒ½', 'ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿æ©Ÿèƒ½' ]
ğŸ¯ [FIGMA] Design system integration started
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1362, Quality: 1
âœ… [OPENAI] Schema generation completed
ğŸ”„ [OPENAI] Starting Function Calling for component generation
ğŸ”„ [OPENAI] Category: null
ğŸ”„ [OPENAI] Enhanced idea: å¹´åã€å®¶æ—æ§‹æˆã‚’å…¥åŠ›ã™ã‚‹ã¨ã€æ‰¶é¤Šæ§é™¤ã®é©ç”¨çŠ¶æ³ã‚’åˆ¤å®šã—ã€æœ€é©ãªåƒãæ–¹ï¼ˆãƒ•ãƒ«ã‚¿ã‚¤ãƒ ã€ãƒ‘ãƒ¼ãƒˆã‚¿ã‚¤ãƒ ãªã©ï¼‰ã‚’ææ¡ˆã™ã‚‹ã‚¢ãƒ—ãƒªã€‚ç¨åˆ¶æ”¹æ­£ã«ã‚‚å¯¾å¿œã—ã€å¸¸ã«æ­£ç¢ºãªæƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚
ğŸ”„ [OPENAI] Key Features: [
  'æ‰¶é¤Šæ§é™¤åˆ¤å®šæ©Ÿèƒ½',
  'æœ€é©ãªåƒãæ–¹ææ¡ˆæ©Ÿèƒ½',
  'å¹´åå…¥åŠ›æ©Ÿèƒ½',
  'å®¶æ—æ§‹æˆå…¥åŠ›æ©Ÿèƒ½',
  'ç¨åˆ¶æ”¹æ­£æƒ…å ±æ›´æ–°æ©Ÿèƒ½',
  'ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½'
]
ğŸ” [FEATURE-UI] Generating UI guidelines for features: [ 'æ‰¶é¤Šæ§é™¤åˆ¤å®šæ©Ÿèƒ½', 'æœ€é©ãªåƒãæ–¹ææ¡ˆæ©Ÿèƒ½', 'å¹´åå…¥åŠ›æ©Ÿèƒ½' ]
ğŸ§ [FEATURE-UI] Required components: [ 'å¹´åå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ', 'å®¶æ—æ§‹æˆå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ', 'åˆ¤å®šçµæœè¡¨ç¤ºã‚«ãƒ¼ãƒ‰' ]
ğŸ¯ [OPENAI] Using feature-based UI guidelines instead of category classification
ğŸ“ [OPENAI] Prompt length: 4620 characters
ğŸ“ [OPENAI] Estimated tokens: 1155
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_hybrid_react_component with gpt-4
âœ… [FIGMA] Successfully fetched design data
âœ… [FIGMA] Design tokens extracted successfully
ğŸ¨ [FIGMA] Colors: [ '#000000', '#ffffff', '#5551ff' ]
ğŸ“ [FIGMA] Typography: Figma Hand
ğŸ§© [FIGMA] Components: [ 'Button', 'Input', 'Card' ]
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
âš¡ [OPENAI] High-quality code generation started
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âŒ [OPENAI-OPTIMIZED] generate_hybrid_react_component failed: SyntaxError: Unexpected token ` in JSON at position 58
    at JSON.parse (<anonymous>)
    at OpenAIOptimizedSystem.executeFunction (webpack-internal:///(rsc)/./lib/openai-optimized-system.ts:123:37)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async HybridAIOrchestrator.generateCodeWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:1724:28)
    at async Promise.all (index 1)
    at async HybridAIOrchestrator.generateApp (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:44:44)
    at async POST (webpack-internal:///(rsc)/./app/api/generate/route.ts:30:30)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
âš ï¸ [OPENAI] Function calling failed, attempting text generation
âš ï¸ [OPENAI] Failure reason: Unexpected token ` in JSON at position 58
âš ï¸ [OPENAI] Attempting fallback with direct prompt...
ğŸ¨ [OPENAI-OPTIMIZED] Generating technical text with gpt-4
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1254, Quality: 1
âœ… [OPENAI] Schema generation completed
ğŸ”„ [OPENAI] Starting Function Calling for component generation
ğŸ”„ [OPENAI] Category: null
ğŸ”„ [OPENAI] Enhanced idea: ãƒ¬ã‚·ãƒ”å…±æœ‰ã¨æ–™ç†å‹•ç”»æŠ•ç¨¿ãŒå¯èƒ½ãªSNSã‚¢ãƒ—ãƒªã€‚å‹•ç”»ç·¨é›†æ©Ÿèƒ½ã‚„æ¤œç´¢æ©Ÿèƒ½ã€ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®äº¤æµæ©Ÿèƒ½ã‚’å‚™ãˆã€æ–™ç†ã‚¹ã‚­ãƒ«å‘ä¸Šã¨é£Ÿã®æ¥½ã—ã¿ã‚’ä¿ƒé€²ã—ã¾ã™ã€‚
ğŸ”„ [OPENAI] Key Features: [
  'ãƒ¬ã‚·ãƒ”å‹•ç”»æŠ•ç¨¿æ©Ÿèƒ½',
  'ãƒ¬ã‚·ãƒ”æ¤œç´¢æ©Ÿèƒ½',
  'ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿æ©Ÿèƒ½',
  'æ–™ç†å‹•ç”»ç·¨é›†æ©Ÿèƒ½',
  'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚©ãƒ­ãƒ¼æ©Ÿèƒ½',
  'ãƒ¬ã‚·ãƒ”ä¿å­˜æ©Ÿèƒ½'
]
ğŸ” [FEATURE-UI] Generating UI guidelines for features: [ 'ãƒ¬ã‚·ãƒ”å‹•ç”»æŠ•ç¨¿æ©Ÿèƒ½', 'ãƒ¬ã‚·ãƒ”æ¤œç´¢æ©Ÿèƒ½', 'ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿æ©Ÿèƒ½' ]
ğŸ§ [FEATURE-UI] Required components: [ 'ãƒ¬ã‚·ãƒ”å‹•ç”»æŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ ', 'ãƒ¬ã‚·ãƒ”æ¤œç´¢ãƒªã‚¹ãƒˆ', 'ã‚³ãƒ¡ãƒ³ãƒˆå…¥åŠ›æ¬„' ]
ğŸ¯ [OPENAI] Using feature-based UI guidelines instead of category classification
ğŸ“ [OPENAI] Prompt length: 4783 characters
ğŸ“ [OPENAI] Estimated tokens: 1196
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_hybrid_react_component with gpt-4
 POST /api/generate 200 in 29999ms
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1334, Quality: 1
âœ… [OPENAI] Schema generation completed
âœ… [OPENAI-OPTIMIZED] technical text generated successfully
âœ… [OPENAI] Text generation fallback successful
ğŸ‰ [HYBRID] Multi-AI generation completed successfully
âœ… [GENERATE-API] Generation completed with category: null
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âŒ [OPENAI-OPTIMIZED] generate_hybrid_react_component failed: SyntaxError: Unexpected token ` in JSON at position 57
    at JSON.parse (<anonymous>)
    at OpenAIOptimizedSystem.executeFunction (webpack-internal:///(rsc)/./lib/openai-optimized-system.ts:123:37)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async HybridAIOrchestrator.generateCodeWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:1724:28)
    at async Promise.all (index 1)
    at async HybridAIOrchestrator.generateApp (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:44:44)
    at async POST (webpack-internal:///(rsc)/./app/api/generate/route.ts:30:30)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
âš ï¸ [OPENAI] Function calling failed, attempting text generation
âš ï¸ [OPENAI] Failure reason: Unexpected token ` in JSON at position 57
âš ï¸ [OPENAI] Attempting fallback with direct prompt...
ğŸ¨ [OPENAI-OPTIMIZED] Generating technical text with gpt-4
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
âŒ [OPENAI-OPTIMIZED] generate_hybrid_react_component failed: SyntaxError: Unexpected token ` in JSON at position 54
    at JSON.parse (<anonymous>)
    at OpenAIOptimizedSystem.executeFunction (webpack-internal:///(rsc)/./lib/openai-optimized-system.ts:123:37)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async HybridAIOrchestrator.generateCodeWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:1724:28)
    at async Promise.all (index 1)
    at async HybridAIOrchestrator.generateApp (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:44:44)
    at async POST (webpack-internal:///(rsc)/./app/api/generate/route.ts:30:30)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
âš ï¸ [OPENAI] Function calling failed, attempting text generation
âš ï¸ [OPENAI] Failure reason: Unexpected token ` in JSON at position 54
âš ï¸ [OPENAI] Attempting fallback with direct prompt...
ğŸ¨ [OPENAI-OPTIMIZED] Generating technical text with gpt-4
 âœ“ Compiled in 55ms
âœ… [OPENAI-OPTIMIZED] technical text generated successfully
âœ… [OPENAI] Text generation fallback successful
ğŸ‰ [HYBRID] Multi-AI generation completed successfully
âœ… [GENERATE-API] Generation completed with category: null
 âœ“ Compiled /api/generate in 233ms (62 modules)
ğŸ”§ [OPENAI-INIT] Initializing OpenAI client...
ğŸ”§ [OPENAI-INIT] API Key exists: true
ğŸ”§ [OPENAI-INIT] API Key length: 164
ğŸ”§ [OPENAI-INIT] API Key starts with sk-: true
âœ… [OPENAI-INIT] OpenAI API key validation passed
âœ… [OPENAI-INIT] OpenAI client initialized successfully
=== API Generate Route (Hybrid AI) Called ===
Request body: { idea: 'ãƒ¬ã‚·ãƒ”å…±æœ‰Ã—æ–™ç†å‹•ç”»SNSã‚¢ãƒ—ãƒª', mode: 'balanced' }
ğŸ­ [GENERATE-API] Starting hybrid AI generation for: ãƒ¬ã‚·ãƒ”å…±æœ‰Ã—æ–™ç†å‹•ç”»SNSã‚¢ãƒ—ãƒª
ğŸ­ [HYBRID] Starting multi-AI generation process
ğŸ¯ [HYBRID] Mode: balanced, Creativity: medium
ğŸ” [GEMINI] Direct feature extraction started
âš ï¸ [GEMINI] Category classification DISABLED - using pure feature extraction
ğŸ¤– Calling Gemini API...
ğŸ¨ [GEMINI] Design inspiration generation started
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 5033ms
ğŸ” [JSON] Extracting from Gemini response
ğŸ” [JSON] Raw response: ```json
{
  "colorPalette": ["#F28B82", "#F7E3CE", "#A7D1AB", "#F2F2F2"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Roboto",
    "accent": "Playfair Display"
  },
  "components": ["cards with recipe images and titles", "video player with progress bar and controls", "user profile section with avatar and stats", "search bar with filters", "comment section with nested replies", "interactive ingredient checklist", "recipe saving and organizing features", "step-by-step recipe instructions with images", "in-app messaging for collaboration"],
  "layout": "grid",
  "mood": "warm",
  "inspiration": "A blend of minimalist design with pops of warm color to evoke feelings of home cooking and community.  Inspired by the clean lines of Scandinavian design and the warmth of rustic kitchen aesthetics.  Think bright, airy spaces with touches of natural wood and inviting textures."
}
```

ğŸ” [JSON] Response length: 925
ğŸ” [JSON] Trying pattern 1: /\{[\s\S]*?\}/
ğŸ” [JSON] Pattern 1 matches: 1
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#F28B82", "#F7E3CE", "#A7D1AB", "#F2F2F2"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Roboto",
    "accent": "Playfair Display"
  }...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#F28B82", "#F7E3CE", "#A7D1AB", "#F2F2F2"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Roboto", "accent": "Playfair Display" }...
âš ï¸ [JSON] Pattern 1 failed: Unexpected end of JSON input
ğŸ” [JSON] Trying pattern 2: /```json\s*(\{[\s\S]*?\})\s*```/i
ğŸ” [JSON] Pattern 2 matches: 2
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#F28B82", "#F7E3CE", "#A7D1AB", "#F2F2F2"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Roboto",
    "accent": "Playfair Display"
  },
  "...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#F28B82", "#F7E3CE", "#A7D1AB", "#F2F2F2"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Roboto", "accent": "Playfair Display" }, "components": ["cards w...
âœ… [JSON] Successfully parsed with pattern 2
âœ… [GEMINI] Design inspiration completed
âœ… Gemini API responded in 5731ms
ğŸ” [FEATURE-EXTRACT] Analyzing Gemini response for features...
âœ… [FEATURE-EXTRACT] Successfully parsed JSON
ğŸ” [FEATURE-EXTRACT] Found features: 6
âœ… [GEMINI] Direct feature extraction completed
ğŸ” [GEMINI] Extracted features: [ 'ãƒ¬ã‚·ãƒ”æŠ•ç¨¿æ©Ÿèƒ½', 'æ–™ç†å‹•ç”»æŠ•ç¨¿æ©Ÿèƒ½', 'ãƒ¬ã‚·ãƒ”æ¤œç´¢æ©Ÿèƒ½' ]
ğŸ¯ [FIGMA] Design system integration started
âœ… [FIGMA] Successfully fetched design data
âœ… [FIGMA] Design tokens extracted successfully
ğŸ¨ [FIGMA] Colors: [ '#000000', '#ffffff', '#5551ff' ]
ğŸ“ [FIGMA] Typography: Figma Hand
ğŸ§© [FIGMA] Components: [ 'Button', 'Input', 'Card' ]
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
âš¡ [OPENAI] High-quality code generation started
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
âœ… [OPENAI-OPTIMIZED] technical text generated successfully
âœ… [OPENAI] Text generation fallback successful
ğŸ‰ [HYBRID] Multi-AI generation completed successfully
âœ… [GENERATE-API] Generation completed with category: null
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
ğŸ”§ [OPENAI-OPTIMIZED] Cleaned arguments length: 1241
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1265, Quality: 1
âœ… [OPENAI] Schema generation completed
ğŸ”„ [OPENAI] Starting Function Calling for component generation
ğŸ”„ [OPENAI] Category: null
ğŸ”„ [OPENAI] Enhanced idea: ãƒ¬ã‚·ãƒ”å…±æœ‰ã¨æ–™ç†å‹•ç”»æŠ•ç¨¿ãŒå¯èƒ½ãªSNSã‚¢ãƒ—ãƒªã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªèº«ã®æ–™ç†å‹•ç”»ã‚’æŠ•ç¨¿ã—ã€ãƒ¬ã‚·ãƒ”ã‚’å…±æœ‰ã€ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‹•ç”»ã‚„ãƒ¬ã‚·ãƒ”ã‚’é–²è¦§ãƒ»è©•ä¾¡ã§ãã¾ã™ã€‚ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ã‚„æ¤œç´¢æ©Ÿèƒ½ã‚‚å‚™ãˆã€æ–™ç†å¥½ãã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å½¢æˆã‚’æ”¯æ´ã—ã¾ã™ã€‚
ğŸ”„ [OPENAI] Key Features: [ 'ãƒ¬ã‚·ãƒ”æŠ•ç¨¿æ©Ÿèƒ½', 'æ–™ç†å‹•ç”»æŠ•ç¨¿æ©Ÿèƒ½', 'ãƒ¬ã‚·ãƒ”æ¤œç´¢æ©Ÿèƒ½', 'å‹•ç”»è¦–è´æ©Ÿèƒ½', 'ãƒ¬ã‚·ãƒ”è©•ä¾¡æ©Ÿèƒ½', 'ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿æ©Ÿèƒ½' ]
ğŸ” [FEATURE-UI] Generating UI guidelines for features: [ 'ãƒ¬ã‚·ãƒ”æŠ•ç¨¿æ©Ÿèƒ½', 'æ–™ç†å‹•ç”»æŠ•ç¨¿æ©Ÿèƒ½', 'ãƒ¬ã‚·ãƒ”æ¤œç´¢æ©Ÿèƒ½' ]
ğŸ§ [FEATURE-UI] Required components: [ 'ãƒ¬ã‚·ãƒ”æŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ ', 'å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒ ', 'ãƒ¬ã‚·ãƒ”ãƒªã‚¹ãƒˆ' ]
ğŸ¯ [OPENAI] Using feature-based UI guidelines instead of category classification
ğŸ“ [OPENAI] Prompt length: 4703 characters
ğŸ“ [OPENAI] Estimated tokens: 1176
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_hybrid_react_component with gpt-4
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
ğŸ”§ [OPENAI-OPTIMIZED] Cleaned arguments length: 1326
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1347, Quality: 1
âœ… [OPENAI] Schema generation completed
 POST /api/generate 200 in 44953ms
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
ğŸ”§ [OPENAI-OPTIMIZED] Cleaned arguments length: 1744
âœ… [OPENAI-OPTIMIZED] generate_hybrid_react_component completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 2872, Quality: 1
âœ… [OPENAI] Enterprise-level code generation completed
ğŸ‰ [HYBRID] Multi-AI generation completed successfully
âœ… [GENERATE-API] Generation completed with category: null
=== API Generate Route (Hybrid AI) Called ===
Request body: { idea: 'å®¶è¨ˆç°¿ã‚¢ãƒ—ãƒª', mode: 'balanced' }
ğŸ­ [GENERATE-API] Starting hybrid AI generation for: å®¶è¨ˆç°¿ã‚¢ãƒ—ãƒª
ğŸ­ [HYBRID] Starting multi-AI generation process
ğŸ¯ [HYBRID] Mode: balanced, Creativity: medium
ğŸ” [GEMINI] Direct feature extraction started
âš ï¸ [GEMINI] Category classification DISABLED - using pure feature extraction
ğŸ¤– Calling Gemini API...
ğŸ¨ [GEMINI] Design inspiration generation started
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 4846ms
ğŸ” [JSON] Extracting from Gemini response
ğŸ” [JSON] Raw response: ```json
{
  "colorPalette": ["#2874A6", "#A7D1E6", "#F2B705", "#F2F2F2"],
  "designStyle": "minimalist",
  "typography": {
    "heading": "Noto Sans JP",
    "body": "Noto Sans JP",
    "accent": "Roboto Condensed"
  },
  "components": ["Calendar view", "Charts (bar, pie)", "Input fields with clear buttons", "Segmented controls for expense categories", "Interactive graphs showing spending trends", "Swipe gestures for quick entry", "Customizable widgets"],
  "layout": "dashboard",
  "mood": "calm",
  "inspiration": "Clean and organized Japanese design aesthetic with subtle use of color to highlight key information.  Inspired by the simplicity of traditional Japanese accounting tools, but modernized with interactive elements."
}
```

ğŸ” [JSON] Response length: 741
ğŸ” [JSON] Trying pattern 1: /\{[\s\S]*?\}/
ğŸ” [JSON] Pattern 1 matches: 1
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#2874A6", "#A7D1E6", "#F2B705", "#F2F2F2"],
  "designStyle": "minimalist",
  "typography": {
    "heading": "Noto Sans JP",
    "body": "Noto Sans JP",
    "accent": "Roboto Cond...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#2874A6", "#A7D1E6", "#F2B705", "#F2F2F2"], "designStyle": "minimalist", "typography": { "heading": "Noto Sans JP", "body": "Noto Sans JP", "accent": "Roboto Condensed" }...
âš ï¸ [JSON] Pattern 1 failed: Unexpected end of JSON input
ğŸ” [JSON] Trying pattern 2: /```json\s*(\{[\s\S]*?\})\s*```/i
ğŸ” [JSON] Pattern 2 matches: 2
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#2874A6", "#A7D1E6", "#F2B705", "#F2F2F2"],
  "designStyle": "minimalist",
  "typography": {
    "heading": "Noto Sans JP",
    "body": "Noto Sans JP",
    "accent": "Roboto Cond...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#2874A6", "#A7D1E6", "#F2B705", "#F2F2F2"], "designStyle": "minimalist", "typography": { "heading": "Noto Sans JP", "body": "Noto Sans JP", "accent": "Roboto Condensed" }, "compone...
âœ… [JSON] Successfully parsed with pattern 2
âœ… [GEMINI] Design inspiration completed
âœ… Gemini API responded in 6308ms
ğŸ” [FEATURE-EXTRACT] Analyzing Gemini response for features...
âœ… [FEATURE-EXTRACT] Successfully parsed JSON
ğŸ” [FEATURE-EXTRACT] Found features: 6
âœ… [GEMINI] Direct feature extraction completed
ğŸ” [GEMINI] Extracted features: [ 'åæ”¯è¨˜éŒ²å…¥åŠ›æ©Ÿèƒ½', 'äºˆç®—è¨­å®šæ©Ÿèƒ½', 'ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡ºåˆ†ææ©Ÿèƒ½' ]
ğŸ¯ [FIGMA] Design system integration started
âœ… [FIGMA] Successfully fetched design data
âœ… [FIGMA] Design tokens extracted successfully
ğŸ¨ [FIGMA] Colors: [ '#000000', '#ffffff', '#5551ff' ]
ğŸ“ [FIGMA] Typography: Figma Hand
ğŸ§© [FIGMA] Components: [ 'Button', 'Input', 'Card' ]
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
âš¡ [OPENAI] High-quality code generation started
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
 POST /api/generate 200 in 24938ms
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
ğŸ”§ [OPENAI-OPTIMIZED] Cleaned arguments length: 1402
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1338, Quality: 1
âœ… [OPENAI] Schema generation completed
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
ğŸ”§ [OPENAI-OPTIMIZED] Cleaned arguments length: 1275
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1265, Quality: 1
âœ… [OPENAI] Schema generation completed
ğŸ”„ [OPENAI] Starting Function Calling for component generation
ğŸ”„ [OPENAI] Category: null
ğŸ”„ [OPENAI] Enhanced idea: ã‚·ãƒ³ãƒ—ãƒ«ã§ä½¿ã„ã‚„ã™ã„å®¶è¨ˆç°¿ã‚¢ãƒ—ãƒªã€‚åæ”¯è¨˜éŒ²ã€äºˆç®—ç®¡ç†ã€åˆ†ææ©Ÿèƒ½ã‚’å‚™ãˆã€æ—¥ã€…ã®å®¶è¨ˆç®¡ç†ã‚’åŠ¹ç‡åŒ–ã—ã¾ã™ã€‚ç›´æ„Ÿçš„ãªæ“ä½œæ€§ã¨å®‰å®šæ€§ã‚’é‡è¦–ã—ãŸè¨­è¨ˆã§ã™ã€‚
ğŸ”„ [OPENAI] Key Features: [
  'åæ”¯è¨˜éŒ²å…¥åŠ›æ©Ÿèƒ½',
  'äºˆç®—è¨­å®šæ©Ÿèƒ½',
  'ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡ºåˆ†ææ©Ÿèƒ½',
  'æ®‹é«˜è¡¨ç¤ºæ©Ÿèƒ½',
  'æ”¯å‡ºäºˆæ¸¬æ©Ÿèƒ½',
  'ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ©Ÿèƒ½'
]
ğŸ” [FEATURE-UI] Generating UI guidelines for features: [ 'åæ”¯è¨˜éŒ²å…¥åŠ›æ©Ÿèƒ½', 'äºˆç®—è¨­å®šæ©Ÿèƒ½', 'ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡ºåˆ†ææ©Ÿèƒ½' ]
ğŸ§ [FEATURE-UI] Required components: [ 'åæ”¯å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ', 'å††ã‚°ãƒ©ãƒ•è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ', 'äºˆç®—è¨­å®šã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼' ]
ğŸ¯ [OPENAI] Using feature-based UI guidelines instead of category classification
ğŸ“ [OPENAI] Prompt length: 4418 characters
ğŸ“ [OPENAI] Estimated tokens: 1105
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_hybrid_react_component with gpt-4
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
ğŸ”§ [OPENAI-OPTIMIZED] Cleaned arguments length: 5489
âŒ [OPENAI-OPTIMIZED] generate_hybrid_react_component failed: SyntaxError: Unexpected token p in JSON at position 1726
    at JSON.parse (<anonymous>)
    at OpenAIOptimizedSystem.executeFunction (webpack-internal:///(rsc)/./lib/openai-optimized-system.ts:130:37)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async HybridAIOrchestrator.generateCodeWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:1724:28)
    at async Promise.all (index 1)
    at async HybridAIOrchestrator.generateApp (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:44:44)
    at async POST (webpack-internal:///(rsc)/./app/api/generate/route.ts:30:30)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
âš ï¸ [OPENAI] Function calling failed, attempting text generation
âš ï¸ [OPENAI] Failure reason: Unexpected token p in JSON at position 1726
âš ï¸ [OPENAI] Attempting fallback with direct prompt...
ğŸ¨ [OPENAI-OPTIMIZED] Generating technical text with gpt-4
âœ… [OPENAI-OPTIMIZED] technical text generated successfully
âœ… [OPENAI] Text generation fallback successful
ğŸ‰ [HYBRID] Multi-AI generation completed successfully
âœ… [GENERATE-API] Generation completed with category: null
 âœ“ Compiled in 54ms
 âœ“ Compiled /api/generate in 183ms (62 modules)
ğŸ”§ [OPENAI-INIT] Initializing OpenAI client...
ğŸ”§ [OPENAI-INIT] API Key exists: true
ğŸ”§ [OPENAI-INIT] API Key length: 164
ğŸ”§ [OPENAI-INIT] API Key starts with sk-: true
âœ… [OPENAI-INIT] OpenAI API key validation passed
âœ… [OPENAI-INIT] OpenAI client initialized successfully
=== API Generate Route (Hybrid AI) Called ===
Request body: { idea: 'ç¤¾å“¡ç®¡ç†ã‚¢ãƒ—ãƒª', mode: 'balanced' }
ğŸ­ [GENERATE-API] Starting hybrid AI generation for: ç¤¾å“¡ç®¡ç†ã‚¢ãƒ—ãƒª
ğŸ­ [HYBRID] Starting multi-AI generation process
ğŸ¯ [HYBRID] Mode: balanced, Creativity: medium
ğŸ” [GEMINI] Direct feature extraction started
âš ï¸ [GEMINI] Category classification DISABLED - using pure feature extraction
ğŸ¤– Calling Gemini API...
ğŸ¨ [GEMINI] Design inspiration generation started
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 4680ms
ğŸ” [JSON] Extracting from Gemini response
ğŸ” [JSON] Raw response: ```json
{
  "colorPalette": ["#286F91", "#A7D1E6", "#F2A24E", "#F5F5F5"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Roboto",
    "accent": "Lato"
  },
  "components": ["cards", "progress bars", "charts", "tables", "calendars", "buttons", "dropdowns", "modals", "search bar", "avatar"],
  "layout": "dashboard",
  "mood": "calm",
  "inspiration": "Clean and efficient design inspired by Scandinavian minimalism, emphasizing readability and ease of navigation.  Focus on data visualization and clear presentation of employee information."
}
```

ğŸ” [JSON] Response length: 585
ğŸ” [JSON] Trying pattern 1: /\{[\s\S]*?\}/
ğŸ” [JSON] Pattern 1 matches: 1
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#286F91", "#A7D1E6", "#F2A24E", "#F5F5F5"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Roboto",
    "accent": "Lato"
  }...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#286F91", "#A7D1E6", "#F2A24E", "#F5F5F5"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Roboto", "accent": "Lato" }...
âš ï¸ [JSON] Pattern 1 failed: Unexpected end of JSON input
ğŸ” [JSON] Trying pattern 2: /```json\s*(\{[\s\S]*?\})\s*```/i
ğŸ” [JSON] Pattern 2 matches: 2
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#286F91", "#A7D1E6", "#F2A24E", "#F5F5F5"],
  "designStyle": "modern",
  "typography": {
    "heading": "Poppins",
    "body": "Roboto",
    "accent": "Lato"
  },
  "components":...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#286F91", "#A7D1E6", "#F2A24E", "#F5F5F5"], "designStyle": "modern", "typography": { "heading": "Poppins", "body": "Roboto", "accent": "Lato" }, "components": ["cards", "progress b...
âœ… [JSON] Successfully parsed with pattern 2
âœ… [GEMINI] Design inspiration completed
âœ… Gemini API responded in 5951ms
ğŸ” [FEATURE-EXTRACT] Analyzing Gemini response for features...
âœ… [FEATURE-EXTRACT] Successfully parsed JSON
ğŸ” [FEATURE-EXTRACT] Found features: 6
âœ… [GEMINI] Direct feature extraction completed
ğŸ” [GEMINI] Extracted features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½' ]
ğŸ¯ [FIGMA] Design system integration started
âœ… [FIGMA] Successfully fetched design data
âœ… [FIGMA] Design tokens extracted successfully
ğŸ¨ [FIGMA] Colors: [ '#000000', '#ffffff', '#5551ff' ]
ğŸ“ [FIGMA] Typography: Figma Hand
ğŸ§© [FIGMA] Components: [ 'Button', 'Input', 'Card' ]
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
âš¡ [OPENAI] High-quality code generation started
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
ğŸ” [OPENAI-OPTIMIZED] Raw arguments length: 1031
âœ… [OPENAI-OPTIMIZED] Direct JSON parse successful
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1224, Quality: 1
âœ… [OPENAI] Schema generation completed
ğŸ”„ [OPENAI] Starting Function Calling for component generation
ğŸ”„ [OPENAI] Category: null
ğŸ”„ [OPENAI] Enhanced idea: ç¤¾å“¡ã®å‹¤æ€ ã€çµ¦ä¸ã€ã‚¹ã‚­ãƒ«æƒ…å ±ã‚’ä¸€å…ƒç®¡ç†ã—ã€äººäº‹æ‹…å½“è€…ã®æ¥­å‹™åŠ¹ç‡åŒ–ã¨ãƒ‡ãƒ¼ã‚¿åˆ†æã«ã‚ˆã‚‹æˆ¦ç•¥çš„ãªäººäº‹é…ç½®ã‚’æ”¯æ´ã™ã‚‹ã‚¢ãƒ—ãƒªã§ã™ã€‚æ­£ç¢ºãªãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ãŸè¿…é€Ÿãªæ„æ€æ±ºå®šã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚
ğŸ”„ [OPENAI] Key Features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½', 'ç¤¾å“¡æƒ…å ±æ¤œç´¢æ©Ÿèƒ½', 'äººäº‹ç•°å‹•ç®¡ç†æ©Ÿèƒ½', 'ä¼‘æš‡ç”³è«‹æ©Ÿèƒ½' ]
ğŸ” [FEATURE-UI] Generating UI guidelines for features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½' ]
ğŸ§ [FEATURE-UI] Required components: [ 'ç¤¾å“¡æƒ…å ±å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ', 'å‹¤æ€ è¨˜éŒ²ãƒªã‚¹ãƒˆ', 'çµ¦ä¸æ˜ç´°è¡¨ç¤ºã‚«ãƒ¼ãƒ‰' ]
ğŸ¯ [OPENAI] Using feature-based UI guidelines instead of category classification
ğŸ“ [OPENAI] Prompt length: 4402 characters
ğŸ“ [OPENAI] Estimated tokens: 1101
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_hybrid_react_component with gpt-4
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
ğŸ” [OPENAI-OPTIMIZED] Raw arguments length: 1045
âœ… [OPENAI-OPTIMIZED] Direct JSON parse successful
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1234, Quality: 1
âœ… [OPENAI] Schema generation completed
 POST /api/generate 200 in 49949ms
 âœ“ Compiled in 49ms
 âœ“ Compiled /api/generate in 188ms (62 modules)
ğŸ”§ [OPENAI-INIT] Initializing OpenAI client...
ğŸ”§ [OPENAI-INIT] API Key exists: true
ğŸ”§ [OPENAI-INIT] API Key length: 164
ğŸ”§ [OPENAI-INIT] API Key starts with sk-: true
âœ… [OPENAI-INIT] OpenAI API key validation passed
âœ… [OPENAI-INIT] OpenAI client initialized successfully
=== API Generate Route (Hybrid AI) Called ===
Request body: { idea: 'ç¤¾å“¡ç®¡ç†ã‚¢ãƒ—ãƒª', mode: 'balanced' }
ğŸ­ [GENERATE-API] Starting hybrid AI generation for: ç¤¾å“¡ç®¡ç†ã‚¢ãƒ—ãƒª
ğŸ­ [HYBRID] Starting multi-AI generation process
ğŸ¯ [HYBRID] Mode: balanced, Creativity: medium
ğŸ” [GEMINI] Direct feature extraction started
âš ï¸ [GEMINI] Category classification DISABLED - using pure feature extraction
ğŸ¤– Calling Gemini API...
ğŸ¨ [GEMINI] Design inspiration generation started
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 4771ms
ğŸ” [JSON] Extracting from Gemini response
ğŸ” [JSON] Raw response: ```json
{
  "colorPalette": ["#286F8E", "#A3D1D5", "#F2E9E4", "#F5F5F5"],
  "designStyle": "modern",
  "typography": {
    "heading": "Roboto",
    "body": "Noto Sans",
    "accent": "Roboto Condensed"
  },
  "components": ["Cards for employee profiles", "Data tables for performance metrics", "Charts for visualizing data", "Calendar for scheduling", "Progress bars for task completion", "Search bar", "Filter options", "Notifications"],
  "layout": "dashboard",
  "mood": "calm",
  "inspiration": "Clean and efficient design inspired by Scandinavian minimalism, emphasizing readability and data clarity.  Focus on a calm and productive atmosphere using light blues and greys."
}
```

ğŸ” [JSON] Response length: 685
ğŸ” [JSON] Trying pattern 1: /\{[\s\S]*?\}/
ğŸ” [JSON] Pattern 1 matches: 1
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#286F8E", "#A3D1D5", "#F2E9E4", "#F5F5F5"],
  "designStyle": "modern",
  "typography": {
    "heading": "Roboto",
    "body": "Noto Sans",
    "accent": "Roboto Condensed"
  }...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#286F8E", "#A3D1D5", "#F2E9E4", "#F5F5F5"], "designStyle": "modern", "typography": { "heading": "Roboto", "body": "Noto Sans", "accent": "Roboto Condensed" }...
âš ï¸ [JSON] Pattern 1 failed: Unexpected end of JSON input
ğŸ” [JSON] Trying pattern 2: /```json\s*(\{[\s\S]*?\})\s*```/i
ğŸ” [JSON] Pattern 2 matches: 2
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#286F8E", "#A3D1D5", "#F2E9E4", "#F5F5F5"],
  "designStyle": "modern",
  "typography": {
    "heading": "Roboto",
    "body": "Noto Sans",
    "accent": "Roboto Condensed"
  },
 ...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#286F8E", "#A3D1D5", "#F2E9E4", "#F5F5F5"], "designStyle": "modern", "typography": { "heading": "Roboto", "body": "Noto Sans", "accent": "Roboto Condensed" }, "components": ["Cards...
âœ… [JSON] Successfully parsed with pattern 2
âœ… [GEMINI] Design inspiration completed
âœ… Gemini API responded in 5715ms
ğŸ” [FEATURE-EXTRACT] Analyzing Gemini response for features...
âœ… [FEATURE-EXTRACT] Successfully parsed JSON
ğŸ” [FEATURE-EXTRACT] Found features: 6
âœ… [GEMINI] Direct feature extraction completed
ğŸ” [GEMINI] Extracted features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½' ]
ğŸ¯ [FIGMA] Design system integration started
âœ… [FIGMA] Successfully fetched design data
âœ… [FIGMA] Design tokens extracted successfully
ğŸ¨ [FIGMA] Colors: [ '#000000', '#ffffff', '#5551ff' ]
ğŸ“ [FIGMA] Typography: Figma Hand
ğŸ§© [FIGMA] Components: [ 'Button', 'Input', 'Card' ]
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
âš¡ [OPENAI] High-quality code generation started
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
ğŸ” [OPENAI-OPTIMIZED] Raw arguments length: 1238
âœ… [OPENAI-OPTIMIZED] Direct JSON parse successful
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1240, Quality: 1
âœ… [OPENAI] Schema generation completed
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
ğŸ” [OPENAI-OPTIMIZED] Raw arguments length: 1253
âœ… [OPENAI-OPTIMIZED] Direct JSON parse successful
âœ… [OPENAI-OPTIMIZED] generate_advanced_schema completed successfully
ğŸ“Š [OPENAI-OPTIMIZED] Tokens: 1253, Quality: 1
âœ… [OPENAI] Schema generation completed
ğŸ”„ [OPENAI] Starting Function Calling for component generation
ğŸ”„ [OPENAI] Category: null
ğŸ”„ [OPENAI] Enhanced idea: ç¤¾å“¡ã®å‹¤æ€ ã€çµ¦ä¸ã€ã‚¹ã‚­ãƒ«ãªã©ã‚’ä¸€å…ƒç®¡ç†ã—ã€äººäº‹æ‹…å½“è€…ã®æ¥­å‹™åŠ¹ç‡åŒ–ã¨ãƒ‡ãƒ¼ã‚¿åˆ†æã«ã‚ˆã‚‹æˆ¦ç•¥çš„ãªäººäº‹æˆ¦ç•¥ç«‹æ¡ˆã‚’æ”¯æ´ã™ã‚‹ç¤¾å“¡ç®¡ç†ã‚¢ãƒ—ãƒªã§ã™ã€‚
ğŸ”„ [OPENAI] Key Features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½', 'ç¤¾å“¡æƒ…å ±ç®¡ç†æ©Ÿèƒ½', 'ä¼‘æš‡ç”³è«‹æ©Ÿèƒ½', 'äººäº‹è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ' ]
ğŸ” [FEATURE-UI] Generating UI guidelines for features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½' ]
ğŸ§ [FEATURE-UI] Required components: [ 'ç¤¾å“¡æƒ…å ±å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ', 'å‹¤æ€ è¨˜éŒ²ãƒªã‚¹ãƒˆ', 'çµ¦ä¸æ˜ç´°è¡¨ç¤ºã‚«ãƒ¼ãƒ‰' ]
ğŸ¯ [OPENAI] Using feature-based UI guidelines instead of category classification
ğŸ“ [OPENAI] Prompt length: 4365 characters
ğŸ“ [OPENAI] Estimated tokens: 1092
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_hybrid_react_component with gpt-4
 POST /api/generate 200 in 49950ms
âŒ [OPENAI-OPTIMIZED] generate_hybrid_react_component failed: APIConnectionTimeoutError: Request timed out.
    at OpenAI.makeRequest (file:///home/rinta/MATURA-claude/node_modules/openai/core.mjs:323:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async OpenAIOptimizedSystem.executeFunction (webpack-internal:///(rsc)/./lib/openai-optimized-system.ts:40:28)
    at async HybridAIOrchestrator.generateCodeWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:1724:28)
    at async Promise.all (index 1)
    at async HybridAIOrchestrator.generateApp (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:44:44)
    at async POST (webpack-internal:///(rsc)/./app/api/generate/route.ts:30:30)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13) {
  status: undefined,
  headers: undefined,
  request_id: undefined,
  error: undefined,
  code: undefined,
  param: undefined,
  type: undefined
}
âš ï¸ [OPENAI] Function calling failed, attempting text generation
âš ï¸ [OPENAI] Failure reason: Request timed out.
âš ï¸ [OPENAI] Attempting fallback with direct prompt...
ğŸ¨ [OPENAI-OPTIMIZED] Generating technical text with gpt-4
âœ… [OPENAI-OPTIMIZED] technical text generated successfully
âœ… [OPENAI] Text generation fallback successful
ğŸ‰ [HYBRID] Multi-AI generation completed successfully
âœ… [GENERATE-API] Generation completed with category: null
ğŸ“¥ [OPENAI-OPTIMIZED] Parsing function arguments
ğŸ” [OPENAI-OPTIMIZED] Raw arguments length: 1681
âš ï¸ [OPENAI-OPTIMIZED] Direct parse failed, trying cleanup
ğŸ” [OPENAI-OPTIMIZED] Raw arguments length: 1681
ğŸ”§ [OPENAI-OPTIMIZED] Cleaned arguments length: 1337
âš ï¸ [OPENAI-OPTIMIZED] Cleanup failed, trying advanced extraction
âš ï¸ [OPENAI-OPTIMIZED] Pattern 1 failed: Unexpected token æ‰¿ in JSON at position 368
âš ï¸ [OPENAI-OPTIMIZED] Pattern 3 failed: Unexpected token ç¤¾ in JSON at position 2
âš ï¸ [OPENAI-OPTIMIZED] Pattern 4 failed: Unexpected token ç¤¾ in JSON at position 2
âŒ [OPENAI-OPTIMIZED] All parsing attempts failed
Raw arguments sample: {
  "componentName": "ç¤¾Manager",
  "typeDefinitions": `
    interface ç¤¾å“¡ {
      ç¤¾å“¡ID: string;
      æ°å: string;
      å…¥ç¤¾æ—¥: Date;
      å½¹è·: string;
      ã‚¹ã‚­ãƒ«: string[];
    }

    interface å‹¤æ€ è¨˜éŒ² {
      ç¤¾å“¡ID: string;
      æ—¥ä»˜: Date;
      å‡ºå‹¤æ™‚é–“: string;
      é€€å‹¤æ™‚é–“: string;
      æ®‹æ¥­æ™‚é–“: string;
    }

    interface çµ¦ä¸æƒ…å ± {
      ç¤¾å“¡ID: string;
      åŸºæœ¬çµ¦: number;
      æ®‹æ¥­æ‰‹å½“: number;
      äº¤é€šè²»: number;
      çµ¦ä¸åˆè¨ˆ: number;
    }

    interface ä¼‘æš‡ç”³è«‹ {
      ç¤¾å“¡ID: string;
      ç”³è«‹æ—¥: Date;
      ä¼‘æš‡ç†ç”±: stri
Cleaned sample: { "componentName": "ç¤¾Manager", "typeDefinitions": " interface ç¤¾å“¡ { ç¤¾å“¡ID: string; æ°å: string; å…¥ç¤¾æ—¥: Date; å½¹è·: string; ã‚¹ã‚­ãƒ«: string[]; } interface å‹¤æ€ è¨˜éŒ² { ç¤¾å“¡ID: string; æ—¥ä»˜: Date; å‡ºå‹¤æ™‚é–“: string; é€€å‹¤æ™‚é–“: string; æ®‹æ¥­æ™‚é–“: string; } interface çµ¦ä¸æƒ…å ± { ç¤¾å“¡ID: string; åŸºæœ¬çµ¦: number; æ®‹æ¥­æ‰‹å½“: number; äº¤é€šè²»: number; çµ¦ä¸åˆè¨ˆ: number; } interface ä¼‘æš‡ç”³è«‹ { ç¤¾å“¡ID: string; ç”³è«‹æ—¥: Date; ä¼‘æš‡ç†ç”±: string; æ‰¿èªçŠ¶æ…‹: "æ‰¿èª" | "æœªæ‰¿èª" | "ä¿ç•™"; } interface äººäº‹è©•ä¾¡ { ç¤¾å“¡ID: string; è©•ä¾¡å¹´åº¦: string; è©•ä¾¡è€…: string; è©•ä¾¡å†…å®¹: string; } ", "componentCode": " import React, 
âŒ [OPENAI-OPTIMIZED] generate_hybrid_react_component failed: Error: JSON parsing failed: Unexpected token æ‰¿ in JSON at position 368
    at OpenAIOptimizedSystem.executeFunction (webpack-internal:///(rsc)/./lib/openai-optimized-system.ts:182:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async HybridAIOrchestrator.generateCodeWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:1724:28)
    at async Promise.all (index 1)
    at async HybridAIOrchestrator.generateApp (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:44:44)
    at async POST (webpack-internal:///(rsc)/./app/api/generate/route.ts:30:30)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13)
âš ï¸ [OPENAI] Function calling failed, attempting text generation
âš ï¸ [OPENAI] Failure reason: JSON parsing failed: Unexpected token æ‰¿ in JSON at position 368
âš ï¸ [OPENAI] Attempting fallback with direct prompt...
ğŸ¨ [OPENAI-OPTIMIZED] Generating technical text with gpt-4
 âœ“ Compiled in 47ms
âœ… [OPENAI-OPTIMIZED] technical text generated successfully
âœ… [OPENAI] Text generation fallback successful
ğŸ‰ [HYBRID] Multi-AI generation completed successfully
âœ… [GENERATE-API] Generation completed with category: null
 âœ“ Compiled /api/generate in 322ms (62 modules)
ğŸ”§ [OPENAI-INIT] Initializing OpenAI client...
ğŸ”§ [OPENAI-INIT] API Key exists: true
ğŸ”§ [OPENAI-INIT] API Key length: 164
ğŸ”§ [OPENAI-INIT] API Key starts with sk-: true
âœ… [OPENAI-INIT] OpenAI API key validation passed
âœ… [OPENAI-INIT] OpenAI client initialized successfully
=== API Generate Route (Hybrid AI) Called ===
Request body: { idea: 'ç¤¾å“¡ç®¡ç†ã‚¢ãƒ—ãƒª', mode: 'balanced' }
ğŸ­ [GENERATE-API] Starting hybrid AI generation for: ç¤¾å“¡ç®¡ç†ã‚¢ãƒ—ãƒª
ğŸ­ [HYBRID] Starting multi-AI generation process
ğŸ¯ [HYBRID] Mode: balanced, Creativity: medium
ğŸ” [GEMINI] Direct feature extraction started
âš ï¸ [GEMINI] Category classification DISABLED - using pure feature extraction
ğŸ¤– Calling Gemini API...
ğŸ¨ [GEMINI] Design inspiration generation started
ğŸ¤– Calling Gemini API...
âœ… Gemini API responded in 4808ms
ğŸ” [JSON] Extracting from Gemini response
ğŸ” [JSON] Raw response: ```json
{
  "colorPalette": ["#284B63", "#5584AC", "#E0E0E0", "#F5F5F5"],
  "designStyle": "professional",
  "typography": {
    "heading": "Roboto",
    "body": "Roboto",
    "accent": "Montserrat"
  },
  "components": ["cards", "tables", "charts", "progress bars", "calendars", "buttons", "modals", "search bar", "dropdowns"],
  "layout": "dashboard",
  "mood": "calm",
  "inspiration": "Clean and efficient design language inspired by productivity apps like Asana and Notion, focusing on data visualization and ease of navigation.  Emphasis on clear hierarchy and a calming color palette to reduce visual clutter."
}
```

ğŸ” [JSON] Response length: 624
ğŸ” [JSON] Trying pattern 1: /\{[\s\S]*?\}/
ğŸ” [JSON] Pattern 1 matches: 1
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#284B63", "#5584AC", "#E0E0E0", "#F5F5F5"],
  "designStyle": "professional",
  "typography": {
    "heading": "Roboto",
    "body": "Roboto",
    "accent": "Montserrat"
  }...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#284B63", "#5584AC", "#E0E0E0", "#F5F5F5"], "designStyle": "professional", "typography": { "heading": "Roboto", "body": "Roboto", "accent": "Montserrat" }...
âš ï¸ [JSON] Pattern 1 failed: Unexpected end of JSON input
ğŸ” [JSON] Trying pattern 2: /```json\s*(\{[\s\S]*?\})\s*```/i
ğŸ” [JSON] Pattern 2 matches: 2
ğŸ” [JSON] Extracted string: {
  "colorPalette": ["#284B63", "#5584AC", "#E0E0E0", "#F5F5F5"],
  "designStyle": "professional",
  "typography": {
    "heading": "Roboto",
    "body": "Roboto",
    "accent": "Montserrat"
  },
  "c...
ğŸ” [JSON] Cleaned JSON: { "colorPalette": ["#284B63", "#5584AC", "#E0E0E0", "#F5F5F5"], "designStyle": "professional", "typography": { "heading": "Roboto", "body": "Roboto", "accent": "Montserrat" }, "components": ["cards", ...
âœ… [JSON] Successfully parsed with pattern 2
âœ… [GEMINI] Design inspiration completed
âœ… Gemini API responded in 6228ms
ğŸ” [FEATURE-EXTRACT] Analyzing Gemini response for features...
âœ… [FEATURE-EXTRACT] Successfully parsed JSON
ğŸ” [FEATURE-EXTRACT] Found features: 6
âœ… [GEMINI] Direct feature extraction completed
ğŸ” [GEMINI] Extracted features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½' ]
ğŸ¯ [FIGMA] Design system integration started
âœ… [FIGMA] Successfully fetched design data
âœ… [FIGMA] Design tokens extracted successfully
ğŸ¨ [FIGMA] Colors: [ '#000000', '#ffffff', '#5551ff' ]
ğŸ“ [FIGMA] Typography: Figma Hand
ğŸ§© [FIGMA] Components: [ 'Button', 'Input', 'Card' ]
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
âš¡ [OPENAI] High-quality code generation started
ğŸ—ï¸ [OPENAI] High-precision schema generation started
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_advanced_schema with gpt-4
âŒ [OPENAI-OPTIMIZED] generate_advanced_schema failed: BadRequestError: 400 Unrecognized request argument supplied: timeout
    at APIError.generate (file:///home/rinta/MATURA-claude/node_modules/openai/error.mjs:41:20)
    at OpenAI.makeStatusError (file:///home/rinta/MATURA-claude/node_modules/openai/core.mjs:295:25)
    at OpenAI.makeRequest (file:///home/rinta/MATURA-claude/node_modules/openai/core.mjs:339:30)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async OpenAIOptimizedSystem.executeFunction (webpack-internal:///(rsc)/./lib/openai-optimized-system.ts:40:28)
    at async HybridAIOrchestrator.generateSchemaWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:982:30)
    at async HybridAIOrchestrator.generateCodeWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:1562:28)
    at async Promise.all (index 1)
    at async HybridAIOrchestrator.generateApp (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:44:44)
    at async POST (webpack-internal:///(rsc)/./app/api/generate/route.ts:30:30)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13) {
  status: 400,
  headers: {
    'access-control-expose-headers': 'X-Request-ID',
    'alt-svc': 'h3=":443"; ma=86400',
    'cf-cache-status': 'DYNAMIC',
    'cf-ray': '9639c0383c619646-KIX',
    connection: 'keep-alive',
    'content-length': '159',
    'content-type': 'application/json',
    date: 'Wed, 23 Jul 2025 08:19:05 GMT',
    'openai-organization': 'matura-du7nqf',
    'openai-processing-ms': '12',
    'openai-project': 'proj_BsqChgRgIK5PYtSPguTsQ45o',
    'openai-version': '2020-10-01',
    server: 'cloudflare',
    'set-cookie': '__cf_bm=1h1pLq_mwLJ5qhuUW6b4EmL69Tz0N2qQgPEmB.q.ywY-1753258745-1.0.1.1-z2XZmEGZZ_A2o0FcmmovzNE4uTesPF075XkXP2jDw7UXGs.WAq6xaJ.P.n30HMlzV2aD4ggMJGYJVLb6J4F.CiY.75txc0_b3rLWr9oxBNk; path=/; expires=Wed, 23-Jul-25 08:49:05 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=otaoDU8N.TbW7HGAfTwKdztQz5TLsrXNRsqr_CB8Lso-1753258745888-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None',
    'strict-transport-security': 'max-age=31536000; includeSubDomains; preload',
    'x-content-type-options': 'nosniff',
    'x-envoy-upstream-service-time': '14',
    'x-ratelimit-limit-requests': '10000',
    'x-ratelimit-limit-tokens': '10000',
    'x-ratelimit-remaining-requests': '9999',
    'x-ratelimit-remaining-tokens': '9431',
    'x-ratelimit-reset-requests': '8.64s',
    'x-ratelimit-reset-tokens': '3.414s',
    'x-request-id': 'req_7c5af0b3dbcf04fa8f7ca0d5b6a74e2a'
  },
  request_id: 'req_7c5af0b3dbcf04fa8f7ca0d5b6a74e2a',
  error: {
    message: 'Unrecognized request argument supplied: timeout',
    type: 'invalid_request_error',
    param: null,
    code: null
  },
  code: null,
  param: null,
  type: 'invalid_request_error'
}
âš ï¸ [OPENAI] Schema generation failed, using feature-based fallback
ğŸ”§ [FALLBACK] Generating feature-based schema
ğŸ¯ [FALLBACK] Key features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½' ]
âœ… [FALLBACK] Generated feature-based schema: ________
ğŸ”„ [OPENAI] Starting Function Calling for component generation
ğŸ”„ [OPENAI] Category: null
ğŸ”„ [OPENAI] Enhanced idea: ç¤¾å“¡ã®å‹¤æ€ ã€çµ¦ä¸ã€ã‚¹ã‚­ãƒ«ãªã©ã‚’ä¸€å…ƒç®¡ç†ã—ã€äººäº‹æ‹…å½“è€…ã®æ¥­å‹™åŠ¹ç‡åŒ–ã¨ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ãŸäººäº‹æˆ¦ç•¥ç«‹æ¡ˆã‚’æ”¯æ´ã™ã‚‹ç¤¾å“¡ç®¡ç†ã‚¢ãƒ—ãƒªã§ã™ã€‚ç›´æ„Ÿçš„ãªæ“ä½œæ€§ã¨é«˜ã„ãƒ‡ãƒ¼ã‚¿ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ä¸¡ç«‹ã—ã¾ã™ã€‚
ğŸ”„ [OPENAI] Key Features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½', 'ç¤¾å“¡æƒ…å ±ç®¡ç†æ©Ÿèƒ½', 'ä¼‘æš‡ç”³è«‹æ©Ÿèƒ½', 'äººäº‹ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ©Ÿèƒ½' ]
ğŸ” [FEATURE-UI] Generating UI guidelines for features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½' ]
ğŸ§ [FEATURE-UI] Required components: [ 'ç¤¾å“¡ä¸€è¦§ãƒªã‚¹ãƒˆ', 'å‹¤æ€ å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ', 'çµ¦ä¸æ˜ç´°è¡¨ç¤ºã‚«ãƒ¼ãƒ‰' ]
ğŸ¯ [OPENAI] Using feature-based UI guidelines instead of category classification
ğŸ“ [OPENAI] Prompt length: 1965 characters
ğŸ“ [OPENAI] Estimated tokens: 492
ğŸš€ [OPENAI-OPTIMIZED] Starting generate_hybrid_react_component with gpt-3.5-turbo
âŒ [OPENAI-OPTIMIZED] generate_advanced_schema failed: BadRequestError: 400 Unrecognized request argument supplied: timeout
    at APIError.generate (file:///home/rinta/MATURA-claude/node_modules/openai/error.mjs:41:20)
    at OpenAI.makeStatusError (file:///home/rinta/MATURA-claude/node_modules/openai/core.mjs:295:25)
    at OpenAI.makeRequest (file:///home/rinta/MATURA-claude/node_modules/openai/core.mjs:339:30)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async OpenAIOptimizedSystem.executeFunction (webpack-internal:///(rsc)/./lib/openai-optimized-system.ts:40:28)
    at async HybridAIOrchestrator.generateSchemaWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:982:30)
    at async Promise.all (index 0)
    at async HybridAIOrchestrator.generateApp (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:44:44)
    at async POST (webpack-internal:///(rsc)/./app/api/generate/route.ts:30:30)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13) {
  status: 400,
  headers: {
    'access-control-expose-headers': 'X-Request-ID',
    'alt-svc': 'h3=":443"; ma=86400',
    'cf-cache-status': 'DYNAMIC',
    'cf-ray': '9639c0383df2d3e5-KIX',
    connection: 'keep-alive',
    'content-length': '159',
    'content-type': 'application/json',
    date: 'Wed, 23 Jul 2025 08:19:06 GMT',
    'openai-organization': 'matura-du7nqf',
    'openai-processing-ms': '16',
    'openai-project': 'proj_BsqChgRgIK5PYtSPguTsQ45o',
    'openai-version': '2020-10-01',
    server: 'cloudflare',
    'set-cookie': '__cf_bm=KP_YjYKFt.T91xy_UfAqlqdYpZM1c0GoeDFKeWOaPvA-1753258746-1.0.1.1-MU5WH52AEfcK1pz6OV4HVBKvVoqkBk.9TcjMcckb.Y_wPazt_WrY4BGCDB.vwhj7xMK_lWUK92j5uGiwcC9ykrKZwGON0GH_XlMJRlYG8PE; path=/; expires=Wed, 23-Jul-25 08:49:06 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=1_9uLNdVXI8EUer25eO.hdcGnjcOUtYa7Ni70q7AqOE-1753258746177-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None',
    'strict-transport-security': 'max-age=31536000; includeSubDomains; preload',
    'x-content-type-options': 'nosniff',
    'x-envoy-upstream-service-time': '19',
    'x-ratelimit-limit-requests': '10000',
    'x-ratelimit-limit-tokens': '10000',
    'x-ratelimit-remaining-requests': '9998',
    'x-ratelimit-remaining-tokens': '8907',
    'x-ratelimit-reset-requests': '17.004s',
    'x-ratelimit-reset-tokens': '6.552s',
    'x-request-id': 'req_01eb54b098c9e41cab242816aee40104'
  },
  request_id: 'req_01eb54b098c9e41cab242816aee40104',
  error: {
    message: 'Unrecognized request argument supplied: timeout',
    type: 'invalid_request_error',
    param: null,
    code: null
  },
  code: null,
  param: null,
  type: 'invalid_request_error'
}
âš ï¸ [OPENAI] Schema generation failed, using feature-based fallback
ğŸ”§ [FALLBACK] Generating feature-based schema
ğŸ¯ [FALLBACK] Key features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½' ]
âœ… [FALLBACK] Generated feature-based schema: ________
âŒ [OPENAI-OPTIMIZED] generate_hybrid_react_component failed: BadRequestError: 400 Unrecognized request argument supplied: timeout
    at APIError.generate (file:///home/rinta/MATURA-claude/node_modules/openai/error.mjs:41:20)
    at OpenAI.makeStatusError (file:///home/rinta/MATURA-claude/node_modules/openai/core.mjs:295:25)
    at OpenAI.makeRequest (file:///home/rinta/MATURA-claude/node_modules/openai/core.mjs:339:30)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async OpenAIOptimizedSystem.executeFunction (webpack-internal:///(rsc)/./lib/openai-optimized-system.ts:40:28)
    at async HybridAIOrchestrator.generateCodeWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:1618:28)
    at async Promise.all (index 1)
    at async HybridAIOrchestrator.generateApp (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:44:44)
    at async POST (webpack-internal:///(rsc)/./app/api/generate/route.ts:30:30)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13) {
  status: 400,
  headers: {
    'access-control-expose-headers': 'X-Request-ID',
    'alt-svc': 'h3=":443"; ma=86400',
    'cf-cache-status': 'DYNAMIC',
    'cf-ray': '9639c03a3edf9646-KIX',
    connection: 'keep-alive',
    'content-length': '159',
    'content-type': 'application/json',
    date: 'Wed, 23 Jul 2025 08:19:06 GMT',
    'openai-organization': 'matura-du7nqf',
    'openai-processing-ms': '14',
    'openai-project': 'proj_BsqChgRgIK5PYtSPguTsQ45o',
    'openai-version': '2020-10-01',
    server: 'cloudflare',
    'set-cookie': '__cf_bm=lRpQb.47_1cg3Xs4CvcNEHuq9akewcSvHxj0yjTwBdM-1753258746-1.0.1.1-TJ6Dm_0JSWjR0Q_xP3_zO7qpUEw6ENNbUhqbxQxkFHyR9BlLFndFPPpfGWLHZlMNHlG37ECSaSkZyqd6F6lyUK.fvFAHiw21HlUVeDhnwUU; path=/; expires=Wed, 23-Jul-25 08:49:06 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=9FjIeMERATn9bZC3ESKOy0Dzgr.btDdPAf.hcRWHV3Q-1753258746190-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None',
    'strict-transport-security': 'max-age=31536000; includeSubDomains; preload',
    'x-content-type-options': 'nosniff',
    'x-envoy-upstream-service-time': '17',
    'x-ratelimit-limit-requests': '10000',
    'x-ratelimit-limit-tokens': '200000',
    'x-ratelimit-remaining-requests': '9999',
    'x-ratelimit-remaining-tokens': '199173',
    'x-ratelimit-reset-requests': '8.64s',
    'x-ratelimit-reset-tokens': '247ms',
    'x-request-id': 'req_a60577873a930bbb8ebd1a3605c5fdd9'
  },
  request_id: 'req_a60577873a930bbb8ebd1a3605c5fdd9',
  error: {
    message: 'Unrecognized request argument supplied: timeout',
    type: 'invalid_request_error',
    param: null,
    code: null
  },
  code: null,
  param: null,
  type: 'invalid_request_error'
}
âš ï¸ [OPENAI] Function calling failed, attempting text generation
âš ï¸ [OPENAI] Failure reason: 400 Unrecognized request argument supplied: timeout
âš ï¸ [OPENAI] Attempting fallback with direct prompt...
ğŸ¨ [OPENAI-OPTIMIZED] Generating technical text with gpt-4
âŒ [OPENAI-OPTIMIZED] technical text generation failed: BadRequestError: 400 Unrecognized request argument supplied: timeout
    at APIError.generate (file:///home/rinta/MATURA-claude/node_modules/openai/error.mjs:41:20)
    at OpenAI.makeStatusError (file:///home/rinta/MATURA-claude/node_modules/openai/core.mjs:295:25)
    at OpenAI.makeRequest (file:///home/rinta/MATURA-claude/node_modules/openai/core.mjs:339:30)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async OpenAIOptimizedSystem.generateAdvancedText (webpack-internal:///(rsc)/./lib/openai-optimized-system.ts:240:28)
    at async HybridAIOrchestrator.generateCodeWithOpenAI (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:1639:32)
    at async Promise.all (index 1)
    at async HybridAIOrchestrator.generateApp (webpack-internal:///(rsc)/./lib/hybrid-ai-orchestrator.ts:44:44)
    at async POST (webpack-internal:///(rsc)/./app/api/generate/route.ts:30:30)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/rinta/MATURA-claude/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/rinta/MATURA-claude/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/rinta/MATURA-claude/node_modules/next/dist/server/lib/start-server.js:141:13) {
  status: 400,
  headers: {
    'access-control-expose-headers': 'X-Request-ID',
    'alt-svc': 'h3=":443"; ma=86400',
    'cf-cache-status': 'DYNAMIC',
    'cf-ray': '9639c03be8cf9646-KIX',
    connection: 'keep-alive',
    'content-length': '159',
    'content-type': 'application/json',
    date: 'Wed, 23 Jul 2025 08:19:06 GMT',
    'openai-organization': 'matura-du7nqf',
    'openai-processing-ms': '9',
    'openai-project': 'proj_BsqChgRgIK5PYtSPguTsQ45o',
    'openai-version': '2020-10-01',
    server: 'cloudflare',
    'set-cookie': '__cf_bm=GUAvDVkL0Ee_DVXTUgjulPBIYgan..BQTnlkuzktlPc-1753258746-1.0.1.1-jr1qWVLUzBDYpxCYJfWsenT1xLjmNfX7RkNoSbkUBUkeuHYjvhbZvmsIl3KflnZMIKTp4SJLsPlxBfzvgqL5daxPSXgdIfQqODLDuDKzx6I; path=/; expires=Wed, 23-Jul-25 08:49:06 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=48eNyKrNVSDVnmaHlb3o9hBynPQ2OPZMDbzWTZqkkB4-1753258746479-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None',
    'strict-transport-security': 'max-age=31536000; includeSubDomains; preload',
    'x-content-type-options': 'nosniff',
    'x-envoy-upstream-service-time': '11',
    'x-ratelimit-limit-requests': '10000',
    'x-ratelimit-limit-tokens': '10000',
    'x-ratelimit-remaining-requests': '9997',
    'x-ratelimit-remaining-tokens': '8770',
    'x-ratelimit-reset-requests': '25.335s',
    'x-ratelimit-reset-tokens': '7.377s',
    'x-request-id': '96fd4d54-d144-41fb-8e52-b1b90a1c178a'
  },
  request_id: '96fd4d54-d144-41fb-8e52-b1b90a1c178a',
  error: {
    message: 'Unrecognized request argument supplied: timeout',
    type: 'invalid_request_error',
    param: null,
    code: null
  },
  code: null,
  param: null,
  type: 'invalid_request_error'
}
âš ï¸ [OPENAI] Both function calling and text generation failed
âš ï¸ [OPENAI] Function calling error: 400 Unrecognized request argument supplied: timeout
âš ï¸ [OPENAI] Text generation error: 400 Unrecognized request argument supplied: timeout
âš ï¸ [OPENAI] Using category-aware template as last resort
ğŸ”„ [FALLBACK] Generating diverse fallback for: null
ğŸ”„ [FALLBACK] Features: [ 'å‹¤æ€ ç®¡ç†æ©Ÿèƒ½', 'çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½', 'ã‚¹ã‚­ãƒ«ç®¡ç†æ©Ÿèƒ½', 'ç¤¾å“¡æƒ…å ±ç®¡ç†æ©Ÿèƒ½', 'ä¼‘æš‡ç”³è«‹æ©Ÿèƒ½', 'äººäº‹ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ©Ÿèƒ½' ]
ğŸ‰ [HYBRID] Multi-AI generation completed successfully
âœ… [GENERATE-API] Generation completed with category: null
 POST /api/generate 200 in 11902ms
 âœ“ Compiled in 45ms
